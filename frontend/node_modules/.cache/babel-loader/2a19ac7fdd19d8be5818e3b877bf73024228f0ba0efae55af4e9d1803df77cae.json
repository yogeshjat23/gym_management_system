{"ast":null,"code":"import { arrayEach } from \"../../../helpers/array.mjs\";\nimport { rangeEach } from \"../../../helpers/number.mjs\";\nimport { addClass, setAttribute } from \"../../../helpers/dom/element.mjs\";\nimport BaseUI from \"./_base.mjs\";\nimport { A11Y_EXPANDED, A11Y_HIDDEN } from \"../../../helpers/a11y.mjs\";\n/**\n * Class responsible for the UI in the Nested Rows' row headers.\n *\n * @private\n * @class HeadersUI\n * @augments BaseUI\n */\nclass HeadersUI extends BaseUI {\n  /**\n   * CSS classes used in the row headers.\n   *\n   * @type {object}\n   */\n  static get CSS_CLASSES() {\n    return {\n      indicatorContainer: 'ht_nestingLevels',\n      parent: 'ht_nestingParent',\n      indicator: 'ht_nestingLevel',\n      emptyIndicator: 'ht_nestingLevel_empty',\n      button: 'ht_nestingButton',\n      expandButton: 'ht_nestingExpand',\n      collapseButton: 'ht_nestingCollapse'\n    };\n  }\n  constructor(nestedRowsPlugin, hotInstance) {\n    super(nestedRowsPlugin, hotInstance);\n    /**\n     * Reference to the DataManager instance connected with the Nested Rows plugin.\n     *\n     * @type {DataManager}\n     */\n    this.dataManager = this.plugin.dataManager;\n    // /**\n    //  * Level cache array.\n    //  *\n    //  * @type {Array}\n    //  */\n    // this.levelCache = this.dataManager.cache.levels;\n    /**\n     * Reference to the CollapsingUI instance connected with the Nested Rows plugin.\n     *\n     * @type {CollapsingUI}\n     */\n    this.collapsingUI = this.plugin.collapsingUI;\n    /**\n     * Cache for the row headers width.\n     *\n     * @type {null|number}\n     */\n    this.rowHeaderWidthCache = null;\n  }\n\n  /**\n   * Append nesting indicators and buttons to the row headers.\n   *\n   * @private\n   * @param {number} row Row index.\n   * @param {HTMLElement} TH TH 3element.\n   */\n  appendLevelIndicators(row, TH) {\n    const rowIndex = this.hot.toPhysicalRow(row);\n    const rowLevel = this.dataManager.getRowLevel(rowIndex);\n    const rowObject = this.dataManager.getDataObject(rowIndex);\n    const innerDiv = TH.getElementsByTagName('DIV')[0];\n    const innerSpan = innerDiv.querySelector('span.rowHeader');\n    const previousIndicators = innerDiv.querySelectorAll('[class^=\"ht_nesting\"]');\n    const ariaEnabled = this.hot.getSettings().ariaTags;\n    arrayEach(previousIndicators, elem => {\n      if (elem) {\n        innerDiv.removeChild(elem);\n      }\n    });\n    addClass(TH, HeadersUI.CSS_CLASSES.indicatorContainer);\n    if (rowLevel) {\n      const {\n        rootDocument\n      } = this.hot;\n      const initialContent = innerSpan.cloneNode(true);\n      innerDiv.innerHTML = '';\n      rangeEach(0, rowLevel - 1, () => {\n        const levelIndicator = rootDocument.createElement('SPAN');\n        addClass(levelIndicator, HeadersUI.CSS_CLASSES.emptyIndicator);\n        innerDiv.appendChild(levelIndicator);\n      });\n      innerDiv.appendChild(initialContent);\n    }\n    if (this.dataManager.hasChildren(rowObject)) {\n      const buttonsContainer = this.hot.rootDocument.createElement('DIV');\n      if (ariaEnabled) {\n        setAttribute(buttonsContainer, [A11Y_HIDDEN()]);\n      }\n      addClass(TH, HeadersUI.CSS_CLASSES.parent);\n      if (this.collapsingUI.areChildrenCollapsed(rowIndex)) {\n        addClass(buttonsContainer, `${HeadersUI.CSS_CLASSES.button} ${HeadersUI.CSS_CLASSES.expandButton}`);\n        if (ariaEnabled) {\n          setAttribute(TH, [A11Y_EXPANDED(false)]);\n        }\n      } else {\n        addClass(buttonsContainer, `${HeadersUI.CSS_CLASSES.button} ${HeadersUI.CSS_CLASSES.collapseButton}`);\n        if (ariaEnabled) {\n          setAttribute(TH, [A11Y_EXPANDED(true)]);\n        }\n      }\n      innerDiv.appendChild(buttonsContainer);\n    }\n  }\n\n  /**\n   * Update the row header width according to number of levels in the dataset.\n   *\n   * @private\n   * @param {number} deepestLevel Cached deepest level of nesting.\n   */\n  updateRowHeaderWidth(deepestLevel) {\n    let deepestLevelIndex = deepestLevel;\n    if (!deepestLevelIndex) {\n      deepestLevelIndex = this.dataManager.cache.levelCount;\n    }\n    this.rowHeaderWidthCache = Math.max(50, 11 + 10 * deepestLevelIndex + 25);\n    this.hot.render();\n  }\n}\nexport default HeadersUI;","map":{"version":3,"names":["arrayEach","rangeEach","addClass","setAttribute","BaseUI","A11Y_EXPANDED","A11Y_HIDDEN","HeadersUI","CSS_CLASSES","indicatorContainer","parent","indicator","emptyIndicator","button","expandButton","collapseButton","constructor","nestedRowsPlugin","hotInstance","dataManager","plugin","collapsingUI","rowHeaderWidthCache","appendLevelIndicators","row","TH","rowIndex","hot","toPhysicalRow","rowLevel","getRowLevel","rowObject","getDataObject","innerDiv","getElementsByTagName","innerSpan","querySelector","previousIndicators","querySelectorAll","ariaEnabled","getSettings","ariaTags","elem","removeChild","rootDocument","initialContent","cloneNode","innerHTML","levelIndicator","createElement","appendChild","hasChildren","buttonsContainer","areChildrenCollapsed","updateRowHeaderWidth","deepestLevel","deepestLevelIndex","cache","levelCount","Math","max","render"],"sources":["D:/gym-project/frontend/node_modules/handsontable/plugins/nestedRows/ui/headers.mjs"],"sourcesContent":["import { arrayEach } from \"../../../helpers/array.mjs\";\nimport { rangeEach } from \"../../../helpers/number.mjs\";\nimport { addClass, setAttribute } from \"../../../helpers/dom/element.mjs\";\nimport BaseUI from \"./_base.mjs\";\nimport { A11Y_EXPANDED, A11Y_HIDDEN } from \"../../../helpers/a11y.mjs\";\n/**\n * Class responsible for the UI in the Nested Rows' row headers.\n *\n * @private\n * @class HeadersUI\n * @augments BaseUI\n */\nclass HeadersUI extends BaseUI {\n  /**\n   * CSS classes used in the row headers.\n   *\n   * @type {object}\n   */\n  static get CSS_CLASSES() {\n    return {\n      indicatorContainer: 'ht_nestingLevels',\n      parent: 'ht_nestingParent',\n      indicator: 'ht_nestingLevel',\n      emptyIndicator: 'ht_nestingLevel_empty',\n      button: 'ht_nestingButton',\n      expandButton: 'ht_nestingExpand',\n      collapseButton: 'ht_nestingCollapse'\n    };\n  }\n  constructor(nestedRowsPlugin, hotInstance) {\n    super(nestedRowsPlugin, hotInstance);\n    /**\n     * Reference to the DataManager instance connected with the Nested Rows plugin.\n     *\n     * @type {DataManager}\n     */\n    this.dataManager = this.plugin.dataManager;\n    // /**\n    //  * Level cache array.\n    //  *\n    //  * @type {Array}\n    //  */\n    // this.levelCache = this.dataManager.cache.levels;\n    /**\n     * Reference to the CollapsingUI instance connected with the Nested Rows plugin.\n     *\n     * @type {CollapsingUI}\n     */\n    this.collapsingUI = this.plugin.collapsingUI;\n    /**\n     * Cache for the row headers width.\n     *\n     * @type {null|number}\n     */\n    this.rowHeaderWidthCache = null;\n  }\n\n  /**\n   * Append nesting indicators and buttons to the row headers.\n   *\n   * @private\n   * @param {number} row Row index.\n   * @param {HTMLElement} TH TH 3element.\n   */\n  appendLevelIndicators(row, TH) {\n    const rowIndex = this.hot.toPhysicalRow(row);\n    const rowLevel = this.dataManager.getRowLevel(rowIndex);\n    const rowObject = this.dataManager.getDataObject(rowIndex);\n    const innerDiv = TH.getElementsByTagName('DIV')[0];\n    const innerSpan = innerDiv.querySelector('span.rowHeader');\n    const previousIndicators = innerDiv.querySelectorAll('[class^=\"ht_nesting\"]');\n    const ariaEnabled = this.hot.getSettings().ariaTags;\n    arrayEach(previousIndicators, elem => {\n      if (elem) {\n        innerDiv.removeChild(elem);\n      }\n    });\n    addClass(TH, HeadersUI.CSS_CLASSES.indicatorContainer);\n    if (rowLevel) {\n      const {\n        rootDocument\n      } = this.hot;\n      const initialContent = innerSpan.cloneNode(true);\n      innerDiv.innerHTML = '';\n      rangeEach(0, rowLevel - 1, () => {\n        const levelIndicator = rootDocument.createElement('SPAN');\n        addClass(levelIndicator, HeadersUI.CSS_CLASSES.emptyIndicator);\n        innerDiv.appendChild(levelIndicator);\n      });\n      innerDiv.appendChild(initialContent);\n    }\n    if (this.dataManager.hasChildren(rowObject)) {\n      const buttonsContainer = this.hot.rootDocument.createElement('DIV');\n      if (ariaEnabled) {\n        setAttribute(buttonsContainer, [A11Y_HIDDEN()]);\n      }\n      addClass(TH, HeadersUI.CSS_CLASSES.parent);\n      if (this.collapsingUI.areChildrenCollapsed(rowIndex)) {\n        addClass(buttonsContainer, `${HeadersUI.CSS_CLASSES.button} ${HeadersUI.CSS_CLASSES.expandButton}`);\n        if (ariaEnabled) {\n          setAttribute(TH, [A11Y_EXPANDED(false)]);\n        }\n      } else {\n        addClass(buttonsContainer, `${HeadersUI.CSS_CLASSES.button} ${HeadersUI.CSS_CLASSES.collapseButton}`);\n        if (ariaEnabled) {\n          setAttribute(TH, [A11Y_EXPANDED(true)]);\n        }\n      }\n      innerDiv.appendChild(buttonsContainer);\n    }\n  }\n\n  /**\n   * Update the row header width according to number of levels in the dataset.\n   *\n   * @private\n   * @param {number} deepestLevel Cached deepest level of nesting.\n   */\n  updateRowHeaderWidth(deepestLevel) {\n    let deepestLevelIndex = deepestLevel;\n    if (!deepestLevelIndex) {\n      deepestLevelIndex = this.dataManager.cache.levelCount;\n    }\n    this.rowHeaderWidthCache = Math.max(50, 11 + 10 * deepestLevelIndex + 25);\n    this.hot.render();\n  }\n}\nexport default HeadersUI;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}