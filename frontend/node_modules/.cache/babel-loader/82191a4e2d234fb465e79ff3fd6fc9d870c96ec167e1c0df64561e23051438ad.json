{"ast":null,"code":"function _classPrivateFieldInitSpec(e, t, a) {\n  _checkPrivateRedeclaration(e, t), t.set(e, a);\n}\nfunction _checkPrivateRedeclaration(e, t) {\n  if (t.has(e)) throw new TypeError(\"Cannot initialize the same private elements twice on an object\");\n}\nfunction _defineProperty(e, r, t) {\n  return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n    value: t,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : e[r] = t, e;\n}\nfunction _toPropertyKey(t) {\n  var i = _toPrimitive(t, \"string\");\n  return \"symbol\" == typeof i ? i : i + \"\";\n}\nfunction _toPrimitive(t, r) {\n  if (\"object\" != typeof t || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != typeof i) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nfunction _classPrivateFieldSet(s, a, r) {\n  return s.set(_assertClassBrand(s, a), r), r;\n}\nfunction _classPrivateFieldGet(s, a) {\n  return s.get(_assertClassBrand(s, a));\n}\nfunction _assertClassBrand(e, t, n) {\n  if (\"function\" == typeof e ? e === t : e.has(t)) return arguments.length < 3 ? t : n;\n  throw new TypeError(\"Private element is not present on this object\");\n}\nimport { Positioner } from \"./positioner.mjs\";\nimport { createMenuNavigator } from \"./navigator.mjs\";\nimport { createKeyboardShortcutsCtrl } from \"./shortcuts.mjs\";\nimport { SEPARATOR, NO_ITEMS, predefinedItems } from \"./../predefinedItems/index.mjs\";\nimport { filterSeparators, hasSubMenu, isItemHidden, normalizeSelection, isItemSubMenu, isItemDisabled, isItemSeparator } from \"./utils.mjs\";\nimport EventManager from \"../../../eventManager.mjs\";\nimport { arrayEach, arrayFilter, arrayReduce } from \"../../../helpers/array.mjs\";\nimport { isWindowsOS, isMobileBrowser, isIpadOS } from \"../../../helpers/browser.mjs\";\nimport { addClass, isChildOf, getParentWindow, hasClass, setAttribute } from \"../../../helpers/dom/element.mjs\";\nimport { isRightClick } from \"../../../helpers/dom/event.mjs\";\nimport { debounce, isFunction } from \"../../../helpers/function.mjs\";\nimport { isUndefined, isDefined } from \"../../../helpers/mixed.mjs\";\nimport { mixin } from \"../../../helpers/object.mjs\";\nimport localHooks from \"../../../mixins/localHooks.mjs\";\nimport { createMenuItemRenderer } from \"./menuItemRenderer.mjs\";\nimport { A11Y_EXPANDED, A11Y_MENU, A11Y_TABINDEX } from \"../../../helpers/a11y.mjs\";\nconst MIN_WIDTH = 215;\n\n/**\n * @typedef MenuOptions\n * @property {Menu} [parent=null] Instance of {@link Menu}.\n * @property {string} [name=null] Name of the menu.\n * @property {string} [className=''] Custom class name.\n * @property {boolean} [keepInViewport=true] Determine if should be kept in viewport.\n * @property {boolean} [standalone] Enabling closing menu when clicked element is not belongs to menu itself.\n * @property {number} [minWidth=MIN_WIDTH] The minimum width.\n * @property {HTMLElement} [container] The container.\n */\n\n/**\n * @private\n * @class Menu\n */\nvar _navigator = /*#__PURE__*/new WeakMap();\nvar _shortcutsCtrl = /*#__PURE__*/new WeakMap();\nexport class Menu {\n  /**\n   * @param {Core} hotInstance Handsontable instance.\n   * @param {MenuOptions} [options] Menu options.\n   */\n  constructor(hotInstance, options) {\n    var _this = this;\n    /**\n     * The Handsontable instance.\n     *\n     * @type {Core}\n     */\n    _defineProperty(this, \"hot\", void 0);\n    /**\n     * The Menu options.\n     *\n     * @type {object}\n     */\n    _defineProperty(this, \"options\", void 0);\n    /**\n     * @type {EventManager}\n     */\n    _defineProperty(this, \"eventManager\", new EventManager(this));\n    /**\n     * The Menu container element.\n     *\n     * @type {HTMLElement}\n     */\n    _defineProperty(this, \"container\", void 0);\n    /**\n     * @type {Positioner}\n     */\n    _defineProperty(this, \"positioner\", void 0);\n    /**\n     * The instance of the Handsontable that is used as a menu.\n     *\n     * @type {Core}\n     */\n    _defineProperty(this, \"hotMenu\", null);\n    /**\n     * The collection of the Handsontable instances that are used as sub-menus.\n     *\n     * @type {object}\n     */\n    _defineProperty(this, \"hotSubMenus\", {});\n    /**\n     * If the menu acts as the sub-menu then this property contains the reference to the parent menu.\n     *\n     * @type {Menu}\n     */\n    _defineProperty(this, \"parentMenu\", void 0);\n    /**\n     * The menu items entries.\n     *\n     * @type {object[]}\n     */\n    _defineProperty(this, \"menuItems\", null);\n    /**\n     * @type {boolean}\n     */\n    _defineProperty(this, \"origOutsideClickDeselects\", null);\n    /**\n     * The controller module that allows modifying the menu item selection positions.\n     *\n     * @type {Paginator}\n     */\n    _classPrivateFieldInitSpec(this, _navigator, void 0);\n    /**\n     * The controller module that allows extending the keyboard shortcuts for the menu.\n     *\n     * @type {KeyboardShortcutsMenuController}\n     */\n    _classPrivateFieldInitSpec(this, _shortcutsCtrl, void 0);\n    this.hot = hotInstance;\n    this.options = options || {\n      parent: null,\n      name: null,\n      className: '',\n      keepInViewport: true,\n      standalone: false,\n      minWidth: MIN_WIDTH,\n      container: this.hot.rootDocument.documentElement\n    };\n    this.container = this.createContainer(this.options.name);\n    this.positioner = new Positioner(this.options.keepInViewport);\n    this.parentMenu = this.options.parent || null;\n    this.registerEvents();\n    if (this.isSubMenu()) {\n      this.addLocalHook('afterSelectionChange', function () {\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n        return _this.parentMenu.runLocalHooks('afterSelectionChange', ...args);\n      });\n    }\n  }\n\n  /**\n   * Register event listeners.\n   *\n   * @private\n   */\n  registerEvents() {\n    let frame = this.hot.rootWindow;\n    while (frame) {\n      this.eventManager.addEventListener(frame.document, 'mousedown', event => this.onDocumentMouseDown(event));\n      this.eventManager.addEventListener(frame.document, 'touchstart', event => this.onDocumentMouseDown(event));\n      this.eventManager.addEventListener(frame.document, 'contextmenu', event => this.onDocumentContextMenu(event));\n      frame = getParentWindow(frame);\n    }\n  }\n\n  /**\n   * Set array of objects which defines menu items.\n   *\n   * @param {Array} menuItems Menu items to display.\n   */\n  setMenuItems(menuItems) {\n    this.menuItems = menuItems;\n  }\n\n  /**\n   * Gets the controller object that allows modifying the the menu item selection.\n   *\n   * @returns {Paginator | undefined}\n   */\n  getNavigator() {\n    return _classPrivateFieldGet(_navigator, this);\n  }\n\n  /**\n   * Gets the controller object that allows extending the keyboard shortcuts of the menu.\n   *\n   * @returns {KeyboardShortcutsMenuController | undefined}\n   */\n  getKeyboardShortcutsCtrl() {\n    return _classPrivateFieldGet(_shortcutsCtrl, this);\n  }\n\n  /**\n   * Returns currently selected menu item. Returns `null` if no item was selected.\n   *\n   * @returns {object|null}\n   */\n  getSelectedItem() {\n    return this.hasSelectedItem() ? this.hotMenu.getSourceDataAtRow(this.hotMenu.getSelectedLast()[0]) : null;\n  }\n\n  /**\n   * Checks if the menu has selected (highlighted) any item from the menu list.\n   *\n   * @returns {boolean}\n   */\n  hasSelectedItem() {\n    return Array.isArray(this.hotMenu.getSelectedLast());\n  }\n\n  /**\n   * Check if menu is using as sub-menu.\n   *\n   * @returns {boolean}\n   */\n  isSubMenu() {\n    return this.parentMenu !== null;\n  }\n\n  /**\n   * Open menu.\n   *\n   * @fires Hooks#beforeContextMenuShow\n   * @fires Hooks#afterContextMenuShow\n   */\n  open() {\n    this.runLocalHooks('beforeOpen');\n    this.container.removeAttribute('style');\n    this.container.style.display = 'block';\n    const delayedOpenSubMenu = debounce(row => this.openSubMenu(row), 300);\n    const minWidthOfMenu = this.options.minWidth || MIN_WIDTH;\n    let noItemsDefined = false;\n    let filteredItems = arrayFilter(this.menuItems, item => {\n      if (item.key === NO_ITEMS) {\n        noItemsDefined = true;\n      }\n      return isItemHidden(item, this.hot);\n    });\n    if (filteredItems.length < 1 && !noItemsDefined) {\n      filteredItems.push(predefinedItems()[NO_ITEMS]);\n    } else if (filteredItems.length === 0) {\n      return;\n    }\n    filteredItems = filterSeparators(filteredItems, SEPARATOR);\n    let shouldAutoCloseMenu = false;\n    const settings = {\n      data: filteredItems,\n      colHeaders: false,\n      autoColumnSize: true,\n      autoWrapRow: false,\n      modifyColWidth(width) {\n        if (isDefined(width) && width < minWidthOfMenu) {\n          return minWidthOfMenu;\n        }\n        return width;\n      },\n      autoRowSize: false,\n      readOnly: true,\n      editor: false,\n      copyPaste: false,\n      hiddenRows: true,\n      maxCols: 1,\n      columns: [{\n        data: 'name',\n        renderer: createMenuItemRenderer(this.hot)\n      }],\n      renderAllRows: true,\n      fragmentSelection: false,\n      outsideClickDeselects: false,\n      disableVisualSelection: 'area',\n      layoutDirection: this.hot.isRtl() ? 'rtl' : 'ltr',\n      ariaTags: false,\n      beforeOnCellMouseOver: (event, coords) => {\n        _classPrivateFieldGet(_navigator, this).setCurrentPage(coords.row);\n      },\n      afterOnCellMouseOver: (event, coords) => {\n        if (this.isAllSubMenusClosed()) {\n          delayedOpenSubMenu(coords.row);\n        } else {\n          this.openSubMenu(coords.row);\n        }\n      },\n      rowHeights: row => filteredItems[row].name === SEPARATOR ? 1 : 23,\n      afterOnCellContextMenu: event => {\n        event.preventDefault();\n\n        // On the Windows platform, the \"contextmenu\" is triggered after the \"mouseup\" so that's\n        // why the closing menu is here. (#6507#issuecomment-582392301).\n        if (isWindowsOS() && shouldAutoCloseMenu && this.hasSelectedItem()) {\n          this.close(true);\n        }\n      },\n      afterSelection: (row, column, row2, column2, preventScrolling) => {\n        // do not scroll the viewport when mouse clicks on partially visible menu item\n        if (this.hotMenu.view.isMouseDown()) {\n          preventScrolling.value = true;\n        }\n        this.runLocalHooks('afterSelectionChange', this.getSelectedItem());\n      },\n      beforeOnCellMouseUp: event => {\n        if (this.hasSelectedItem()) {\n          shouldAutoCloseMenu = !this.isCommandPassive(this.getSelectedItem());\n          this.executeCommand(event);\n        }\n      },\n      afterOnCellMouseUp: event => {\n        // If the code runs on the other platform than Windows, the \"mouseup\" is triggered\n        // after the \"contextmenu\". So then \"mouseup\" closes the menu. Otherwise, the closing\n        // menu responsibility is forwarded to \"afterOnCellContextMenu\" callback (#6507#issuecomment-582392301).\n        if ((!isWindowsOS() || !isRightClick(event)) && shouldAutoCloseMenu && this.hasSelectedItem()) {\n          // The timeout is necessary only for mobile devices. For desktop, the click event that is fired\n          // right after the mouseup event gets the event element target the same as the mouseup event.\n          // For mobile devices, the click event is triggered with native delay (~300ms), so when the mouseup\n          // event hides the tapped element, the click event grabs the element below. As a result, the filter\n          // by condition menu is closed and immediately open on tapping the \"None\" item.\n          if (isMobileBrowser() || isIpadOS()) {\n            this.hot._registerTimeout(() => this.close(true), 325);\n          } else {\n            this.close(true);\n          }\n        }\n      },\n      afterUnlisten: () => {\n        // Restore menu focus, fix for `this.instance.unlisten();` call in the tableView.js@260 file.\n        // This prevents losing table responsiveness for keyboard events when filter select menu is closed (#6497).\n        if (!this.hasSelectedItem() && this.isOpened()) {\n          this.hotMenu.listen();\n        }\n      }\n    };\n    this.origOutsideClickDeselects = this.hot.getSettings().outsideClickDeselects;\n    this.hot.getSettings().outsideClickDeselects = false;\n    this.hotMenu = new this.hot.constructor(this.container, settings);\n    this.hotMenu.addHook('afterInit', () => this.onAfterInit());\n    this.hotMenu.init();\n    _classPrivateFieldSet(_navigator, this, createMenuNavigator(this.hotMenu));\n    _classPrivateFieldSet(_shortcutsCtrl, this, createKeyboardShortcutsCtrl(this));\n    _classPrivateFieldGet(_shortcutsCtrl, this).listen();\n    this.focus();\n    if (this.isSubMenu()) {\n      this.addLocalHook('afterOpen', () => this.parentMenu.runLocalHooks('afterSubmenuOpen', this));\n    }\n    this.runLocalHooks('afterOpen', this);\n  }\n\n  /**\n   * Close menu.\n   *\n   * @param {boolean} [closeParent=false] If `true` try to close parent menu if exists.\n   */\n  close() {\n    let closeParent = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    if (!this.isOpened()) {\n      return;\n    }\n    if (closeParent && this.isSubMenu()) {\n      this.parentMenu.close();\n    } else {\n      _classPrivateFieldGet(_navigator, this).clear();\n      this.closeAllSubMenus();\n      this.container.style.display = 'none';\n      this.hotMenu.destroy();\n      this.hotMenu = null;\n      this.hot.getSettings().outsideClickDeselects = this.origOutsideClickDeselects;\n      this.runLocalHooks('afterClose');\n      if (this.isSubMenu()) {\n        if (this.hot.getSettings().ariaTags) {\n          const selection = this.parentMenu.hotMenu.getSelectedLast();\n          if (selection) {\n            const cell = this.parentMenu.hotMenu.getCell(selection[0], 0);\n            setAttribute(cell, [A11Y_EXPANDED(false)]);\n          }\n        }\n        this.parentMenu.hotMenu.listen();\n      }\n    }\n  }\n\n  /**\n   * Open sub menu at the provided row index.\n   *\n   * @param {number} row Row index.\n   * @returns {Menu|boolean} Returns created menu or `false` if no one menu was created.\n   */\n  openSubMenu(row) {\n    if (!this.hotMenu) {\n      return false;\n    }\n    const cell = this.hotMenu.getCell(row, 0);\n    this.closeAllSubMenus();\n    if (!cell || !hasSubMenu(cell)) {\n      return false;\n    }\n    const dataItem = this.hotMenu.getSourceDataAtRow(row);\n    const subMenu = new Menu(this.hot, {\n      parent: this,\n      name: dataItem.name,\n      className: this.options.className,\n      keepInViewport: true,\n      container: this.options.container\n    });\n    subMenu.setMenuItems(dataItem.submenu.items);\n    subMenu.open();\n    subMenu.setPosition(cell.getBoundingClientRect());\n    this.hotSubMenus[dataItem.key] = subMenu;\n\n    // Update the accessibility tags on the cell being the base for the submenu.\n    if (this.hot.getSettings().ariaTags) {\n      setAttribute(cell, [A11Y_EXPANDED(true)]);\n    }\n    return subMenu;\n  }\n\n  /**\n   * Close sub menu at row index.\n   *\n   * @param {number} row Row index.\n   */\n  closeSubMenu(row) {\n    const dataItem = this.hotMenu.getSourceDataAtRow(row);\n    const menus = this.hotSubMenus[dataItem.key];\n    if (menus) {\n      menus.destroy();\n      delete this.hotSubMenus[dataItem.key];\n      const cell = this.hotMenu.getCell(row, 0);\n\n      // Update the accessibility tags on the cell being the base for the submenu.\n      if (this.hot.getSettings().ariaTags) {\n        setAttribute(cell, [A11Y_EXPANDED(false)]);\n      }\n    }\n  }\n\n  /**\n   * Close all opened sub menus.\n   */\n  closeAllSubMenus() {\n    arrayEach(this.hotMenu.getData(), (value, row) => this.closeSubMenu(row));\n  }\n\n  /**\n   * Checks if all created and opened sub menus are closed.\n   *\n   * @returns {boolean}\n   */\n  isAllSubMenusClosed() {\n    return Object.keys(this.hotSubMenus).length === 0;\n  }\n\n  /**\n   * Focus the menu so all keyboard shortcuts become active.\n   */\n  focus() {\n    if (this.isOpened()) {\n      this.hotMenu.rootElement.focus({\n        preventScroll: true\n      });\n      this.getKeyboardShortcutsCtrl().listen();\n      this.hotMenu.listen();\n    }\n  }\n\n  /**\n   * Destroy instance.\n   */\n  destroy() {\n    const menuContainerParentElement = this.container.parentNode;\n    this.clearLocalHooks();\n    this.close();\n    this.parentMenu = null;\n    this.eventManager.destroy();\n    if (menuContainerParentElement) {\n      menuContainerParentElement.removeChild(this.container);\n    }\n  }\n\n  /**\n   * Checks if menu was opened.\n   *\n   * @returns {boolean} Returns `true` if menu was opened.\n   */\n  isOpened() {\n    return this.hotMenu !== null;\n  }\n\n  /**\n   * Execute menu command.\n   *\n   * The `executeCommand()` method works only for selected cells.\n   *\n   * When no cells are selected, `executeCommand()` doesn't do anything.\n   *\n   * @param {Event} [event] The mouse event object.\n   */\n  executeCommand(event) {\n    if (!this.isOpened() || !this.hasSelectedItem()) {\n      return;\n    }\n    const selectedItem = this.getSelectedItem();\n    this.runLocalHooks('select', selectedItem, event);\n    if (this.isCommandPassive(selectedItem)) {\n      return;\n    }\n    const selRanges = this.hot.getSelectedRange();\n    const normalizedSelection = selRanges ? normalizeSelection(selRanges) : [];\n    this.runLocalHooks('executeCommand', selectedItem.key, normalizedSelection, event);\n    if (this.isSubMenu()) {\n      this.parentMenu.runLocalHooks('executeCommand', selectedItem.key, normalizedSelection, event);\n    }\n  }\n\n  /**\n   * Checks if the passed command is passive or not. The command is passive when it's marked as\n   * disabled, the descriptor object contains `isCommand` property set to `false`, command\n   * is a separator, or the item is recognized as submenu. For passive items the menu is not\n   * closed automatically after the user trigger the command through the UI.\n   *\n   * @param {object} commandDescriptor Selected menu item from the menu data source.\n   * @returns {boolean}\n   */\n  isCommandPassive(commandDescriptor) {\n    return commandDescriptor.isCommand === false || isItemSeparator(commandDescriptor) || isItemDisabled(commandDescriptor, this.hot) || isItemSubMenu(commandDescriptor);\n  }\n\n  /**\n   * Set offset menu position for specified area (`above`, `below`, `left` or `right`).\n   *\n   * @param {string} area Specified area name (`above`, `below`, `left` or `right`).\n   * @param {number} offset Offset value.\n   */\n  setOffset(area) {\n    let offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    this.positioner.setOffset(area, offset);\n  }\n\n  /**\n   * Set menu position based on dom event or based on literal object.\n   *\n   * @param {Event|object} coords Event or literal Object with coordinates.\n   */\n  setPosition(coords) {\n    if (this.isSubMenu()) {\n      this.positioner.setParentElement(this.parentMenu.container);\n    }\n    this.positioner.setElement(this.container).updatePosition(coords);\n  }\n\n  /**\n   * Create container/wrapper for handsontable.\n   *\n   * @private\n   * @param {string} [name] Class name.\n   * @returns {HTMLElement}\n   */\n  createContainer() {\n    let name = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    const doc = this.options.container.ownerDocument;\n    let className = name;\n    let container;\n    if (className) {\n      if (isFunction(className)) {\n        className = className.call(this.hot);\n        if (className === null || isUndefined(className)) {\n          className = '';\n        } else {\n          className = className.toString();\n        }\n      }\n      className = className.replace(/[^A-z0-9]/g, '_');\n      className = `${this.options.className}Sub_${className}`;\n      container = doc.querySelector(`.${this.options.className}.${className}`);\n    }\n    if (!container) {\n      container = doc.createElement('div');\n      addClass(container, `htMenu ${this.options.className}`);\n      if (className) {\n        addClass(container, className);\n      }\n      this.options.container.appendChild(container);\n    }\n    return container;\n  }\n\n  /**\n   * On after init listener.\n   *\n   * @private\n   */\n  onAfterInit() {\n    const {\n      wtTable\n    } = this.hotMenu.view._wt;\n    const data = this.hotMenu.getSettings().data;\n    const hiderStyle = wtTable.hider.style;\n    const holderStyle = wtTable.holder.style;\n    const currentHiderWidth = parseInt(hiderStyle.width, 10);\n    const realHeight = arrayReduce(data, (accumulator, value) => accumulator + (value.name === SEPARATOR ? 1 : 26), 0);\n\n    // Additional 3px to menu's size because of additional border around its `table.htCore`.\n    holderStyle.width = `${currentHiderWidth + 3}px`;\n    holderStyle.height = `${realHeight + 3}px`;\n    hiderStyle.height = holderStyle.height;\n\n    // Replace the default accessibility tags with the context menu's\n    if (this.hot.getSettings().ariaTags) {\n      setAttribute(this.hotMenu.rootElement, [A11Y_MENU(), A11Y_TABINDEX(-1)]);\n    }\n  }\n\n  /**\n   * Document mouse down listener.\n   *\n   * @private\n   * @param {Event} event The mouse event object.\n   */\n  onDocumentMouseDown(event) {\n    if (!this.isOpened()) {\n      return;\n    }\n\n    // Close menu when clicked element is not belongs to menu itself\n    if (this.options.standalone && this.hotMenu && !isChildOf(event.target, this.hotMenu.rootElement)) {\n      this.close(true);\n\n      // Automatically close menu when clicked element is not belongs to menu or submenu (not necessarily to itself)\n    } else if ((this.isAllSubMenusClosed() || this.isSubMenu()) && !isChildOf(event.target, '.htMenu')) {\n      this.close(true);\n    }\n  }\n\n  /**\n   * Document's contextmenu listener.\n   *\n   * @private\n   * @param {MouseEvent} event The mouse event object.\n   */\n  onDocumentContextMenu(event) {\n    if (!this.isOpened()) {\n      return;\n    }\n    if (hasClass(event.target, 'htCore') && isChildOf(event.target, this.hotMenu.rootElement)) {\n      event.preventDefault();\n    }\n  }\n}\nmixin(Menu, localHooks);","map":{"version":3,"names":["_classPrivateFieldInitSpec","e","t","a","_checkPrivateRedeclaration","set","has","TypeError","_defineProperty","r","_toPropertyKey","Object","defineProperty","value","enumerable","configurable","writable","i","_toPrimitive","Symbol","toPrimitive","call","String","Number","_classPrivateFieldSet","s","_assertClassBrand","_classPrivateFieldGet","get","n","arguments","length","Positioner","createMenuNavigator","createKeyboardShortcutsCtrl","SEPARATOR","NO_ITEMS","predefinedItems","filterSeparators","hasSubMenu","isItemHidden","normalizeSelection","isItemSubMenu","isItemDisabled","isItemSeparator","EventManager","arrayEach","arrayFilter","arrayReduce","isWindowsOS","isMobileBrowser","isIpadOS","addClass","isChildOf","getParentWindow","hasClass","setAttribute","isRightClick","debounce","isFunction","isUndefined","isDefined","mixin","localHooks","createMenuItemRenderer","A11Y_EXPANDED","A11Y_MENU","A11Y_TABINDEX","MIN_WIDTH","_navigator","WeakMap","_shortcutsCtrl","Menu","constructor","hotInstance","options","_this","hot","parent","name","className","keepInViewport","standalone","minWidth","container","rootDocument","documentElement","createContainer","positioner","parentMenu","registerEvents","isSubMenu","addLocalHook","_len","args","Array","_key","runLocalHooks","frame","rootWindow","eventManager","addEventListener","document","event","onDocumentMouseDown","onDocumentContextMenu","setMenuItems","menuItems","getNavigator","getKeyboardShortcutsCtrl","getSelectedItem","hasSelectedItem","hotMenu","getSourceDataAtRow","getSelectedLast","isArray","open","removeAttribute","style","display","delayedOpenSubMenu","row","openSubMenu","minWidthOfMenu","noItemsDefined","filteredItems","item","key","push","shouldAutoCloseMenu","settings","data","colHeaders","autoColumnSize","autoWrapRow","modifyColWidth","width","autoRowSize","readOnly","editor","copyPaste","hiddenRows","maxCols","columns","renderer","renderAllRows","fragmentSelection","outsideClickDeselects","disableVisualSelection","layoutDirection","isRtl","ariaTags","beforeOnCellMouseOver","coords","setCurrentPage","afterOnCellMouseOver","isAllSubMenusClosed","rowHeights","afterOnCellContextMenu","preventDefault","close","afterSelection","column","row2","column2","preventScrolling","view","isMouseDown","beforeOnCellMouseUp","isCommandPassive","executeCommand","afterOnCellMouseUp","_registerTimeout","afterUnlisten","isOpened","listen","origOutsideClickDeselects","getSettings","addHook","onAfterInit","init","focus","closeParent","undefined","clear","closeAllSubMenus","destroy","selection","cell","getCell","dataItem","subMenu","submenu","items","setPosition","getBoundingClientRect","hotSubMenus","closeSubMenu","menus","getData","keys","rootElement","preventScroll","menuContainerParentElement","parentNode","clearLocalHooks","removeChild","selectedItem","selRanges","getSelectedRange","normalizedSelection","commandDescriptor","isCommand","setOffset","area","offset","setParentElement","setElement","updatePosition","doc","ownerDocument","toString","replace","querySelector","createElement","appendChild","wtTable","_wt","hiderStyle","hider","holderStyle","holder","currentHiderWidth","parseInt","realHeight","accumulator","height","target"],"sources":["D:/gym-project/frontend/node_modules/handsontable/plugins/contextMenu/menu/menu.mjs"],"sourcesContent":["import \"core-js/modules/es.error.cause.js\";\nimport \"core-js/modules/es.array.push.js\";\nfunction _classPrivateFieldInitSpec(e, t, a) { _checkPrivateRedeclaration(e, t), t.set(e, a); }\nfunction _checkPrivateRedeclaration(e, t) { if (t.has(e)) throw new TypeError(\"Cannot initialize the same private elements twice on an object\"); }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _classPrivateFieldSet(s, a, r) { return s.set(_assertClassBrand(s, a), r), r; }\nfunction _classPrivateFieldGet(s, a) { return s.get(_assertClassBrand(s, a)); }\nfunction _assertClassBrand(e, t, n) { if (\"function\" == typeof e ? e === t : e.has(t)) return arguments.length < 3 ? t : n; throw new TypeError(\"Private element is not present on this object\"); }\nimport { Positioner } from \"./positioner.mjs\";\nimport { createMenuNavigator } from \"./navigator.mjs\";\nimport { createKeyboardShortcutsCtrl } from \"./shortcuts.mjs\";\nimport { SEPARATOR, NO_ITEMS, predefinedItems } from \"./../predefinedItems/index.mjs\";\nimport { filterSeparators, hasSubMenu, isItemHidden, normalizeSelection, isItemSubMenu, isItemDisabled, isItemSeparator } from \"./utils.mjs\";\nimport EventManager from \"../../../eventManager.mjs\";\nimport { arrayEach, arrayFilter, arrayReduce } from \"../../../helpers/array.mjs\";\nimport { isWindowsOS, isMobileBrowser, isIpadOS } from \"../../../helpers/browser.mjs\";\nimport { addClass, isChildOf, getParentWindow, hasClass, setAttribute } from \"../../../helpers/dom/element.mjs\";\nimport { isRightClick } from \"../../../helpers/dom/event.mjs\";\nimport { debounce, isFunction } from \"../../../helpers/function.mjs\";\nimport { isUndefined, isDefined } from \"../../../helpers/mixed.mjs\";\nimport { mixin } from \"../../../helpers/object.mjs\";\nimport localHooks from \"../../../mixins/localHooks.mjs\";\nimport { createMenuItemRenderer } from \"./menuItemRenderer.mjs\";\nimport { A11Y_EXPANDED, A11Y_MENU, A11Y_TABINDEX } from \"../../../helpers/a11y.mjs\";\nconst MIN_WIDTH = 215;\n\n/**\n * @typedef MenuOptions\n * @property {Menu} [parent=null] Instance of {@link Menu}.\n * @property {string} [name=null] Name of the menu.\n * @property {string} [className=''] Custom class name.\n * @property {boolean} [keepInViewport=true] Determine if should be kept in viewport.\n * @property {boolean} [standalone] Enabling closing menu when clicked element is not belongs to menu itself.\n * @property {number} [minWidth=MIN_WIDTH] The minimum width.\n * @property {HTMLElement} [container] The container.\n */\n\n/**\n * @private\n * @class Menu\n */\nvar _navigator = /*#__PURE__*/new WeakMap();\nvar _shortcutsCtrl = /*#__PURE__*/new WeakMap();\nexport class Menu {\n  /**\n   * @param {Core} hotInstance Handsontable instance.\n   * @param {MenuOptions} [options] Menu options.\n   */\n  constructor(hotInstance, options) {\n    var _this = this;\n    /**\n     * The Handsontable instance.\n     *\n     * @type {Core}\n     */\n    _defineProperty(this, \"hot\", void 0);\n    /**\n     * The Menu options.\n     *\n     * @type {object}\n     */\n    _defineProperty(this, \"options\", void 0);\n    /**\n     * @type {EventManager}\n     */\n    _defineProperty(this, \"eventManager\", new EventManager(this));\n    /**\n     * The Menu container element.\n     *\n     * @type {HTMLElement}\n     */\n    _defineProperty(this, \"container\", void 0);\n    /**\n     * @type {Positioner}\n     */\n    _defineProperty(this, \"positioner\", void 0);\n    /**\n     * The instance of the Handsontable that is used as a menu.\n     *\n     * @type {Core}\n     */\n    _defineProperty(this, \"hotMenu\", null);\n    /**\n     * The collection of the Handsontable instances that are used as sub-menus.\n     *\n     * @type {object}\n     */\n    _defineProperty(this, \"hotSubMenus\", {});\n    /**\n     * If the menu acts as the sub-menu then this property contains the reference to the parent menu.\n     *\n     * @type {Menu}\n     */\n    _defineProperty(this, \"parentMenu\", void 0);\n    /**\n     * The menu items entries.\n     *\n     * @type {object[]}\n     */\n    _defineProperty(this, \"menuItems\", null);\n    /**\n     * @type {boolean}\n     */\n    _defineProperty(this, \"origOutsideClickDeselects\", null);\n    /**\n     * The controller module that allows modifying the menu item selection positions.\n     *\n     * @type {Paginator}\n     */\n    _classPrivateFieldInitSpec(this, _navigator, void 0);\n    /**\n     * The controller module that allows extending the keyboard shortcuts for the menu.\n     *\n     * @type {KeyboardShortcutsMenuController}\n     */\n    _classPrivateFieldInitSpec(this, _shortcutsCtrl, void 0);\n    this.hot = hotInstance;\n    this.options = options || {\n      parent: null,\n      name: null,\n      className: '',\n      keepInViewport: true,\n      standalone: false,\n      minWidth: MIN_WIDTH,\n      container: this.hot.rootDocument.documentElement\n    };\n    this.container = this.createContainer(this.options.name);\n    this.positioner = new Positioner(this.options.keepInViewport);\n    this.parentMenu = this.options.parent || null;\n    this.registerEvents();\n    if (this.isSubMenu()) {\n      this.addLocalHook('afterSelectionChange', function () {\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n        return _this.parentMenu.runLocalHooks('afterSelectionChange', ...args);\n      });\n    }\n  }\n\n  /**\n   * Register event listeners.\n   *\n   * @private\n   */\n  registerEvents() {\n    let frame = this.hot.rootWindow;\n    while (frame) {\n      this.eventManager.addEventListener(frame.document, 'mousedown', event => this.onDocumentMouseDown(event));\n      this.eventManager.addEventListener(frame.document, 'touchstart', event => this.onDocumentMouseDown(event));\n      this.eventManager.addEventListener(frame.document, 'contextmenu', event => this.onDocumentContextMenu(event));\n      frame = getParentWindow(frame);\n    }\n  }\n\n  /**\n   * Set array of objects which defines menu items.\n   *\n   * @param {Array} menuItems Menu items to display.\n   */\n  setMenuItems(menuItems) {\n    this.menuItems = menuItems;\n  }\n\n  /**\n   * Gets the controller object that allows modifying the the menu item selection.\n   *\n   * @returns {Paginator | undefined}\n   */\n  getNavigator() {\n    return _classPrivateFieldGet(_navigator, this);\n  }\n\n  /**\n   * Gets the controller object that allows extending the keyboard shortcuts of the menu.\n   *\n   * @returns {KeyboardShortcutsMenuController | undefined}\n   */\n  getKeyboardShortcutsCtrl() {\n    return _classPrivateFieldGet(_shortcutsCtrl, this);\n  }\n\n  /**\n   * Returns currently selected menu item. Returns `null` if no item was selected.\n   *\n   * @returns {object|null}\n   */\n  getSelectedItem() {\n    return this.hasSelectedItem() ? this.hotMenu.getSourceDataAtRow(this.hotMenu.getSelectedLast()[0]) : null;\n  }\n\n  /**\n   * Checks if the menu has selected (highlighted) any item from the menu list.\n   *\n   * @returns {boolean}\n   */\n  hasSelectedItem() {\n    return Array.isArray(this.hotMenu.getSelectedLast());\n  }\n\n  /**\n   * Check if menu is using as sub-menu.\n   *\n   * @returns {boolean}\n   */\n  isSubMenu() {\n    return this.parentMenu !== null;\n  }\n\n  /**\n   * Open menu.\n   *\n   * @fires Hooks#beforeContextMenuShow\n   * @fires Hooks#afterContextMenuShow\n   */\n  open() {\n    this.runLocalHooks('beforeOpen');\n    this.container.removeAttribute('style');\n    this.container.style.display = 'block';\n    const delayedOpenSubMenu = debounce(row => this.openSubMenu(row), 300);\n    const minWidthOfMenu = this.options.minWidth || MIN_WIDTH;\n    let noItemsDefined = false;\n    let filteredItems = arrayFilter(this.menuItems, item => {\n      if (item.key === NO_ITEMS) {\n        noItemsDefined = true;\n      }\n      return isItemHidden(item, this.hot);\n    });\n    if (filteredItems.length < 1 && !noItemsDefined) {\n      filteredItems.push(predefinedItems()[NO_ITEMS]);\n    } else if (filteredItems.length === 0) {\n      return;\n    }\n    filteredItems = filterSeparators(filteredItems, SEPARATOR);\n    let shouldAutoCloseMenu = false;\n    const settings = {\n      data: filteredItems,\n      colHeaders: false,\n      autoColumnSize: true,\n      autoWrapRow: false,\n      modifyColWidth(width) {\n        if (isDefined(width) && width < minWidthOfMenu) {\n          return minWidthOfMenu;\n        }\n        return width;\n      },\n      autoRowSize: false,\n      readOnly: true,\n      editor: false,\n      copyPaste: false,\n      hiddenRows: true,\n      maxCols: 1,\n      columns: [{\n        data: 'name',\n        renderer: createMenuItemRenderer(this.hot)\n      }],\n      renderAllRows: true,\n      fragmentSelection: false,\n      outsideClickDeselects: false,\n      disableVisualSelection: 'area',\n      layoutDirection: this.hot.isRtl() ? 'rtl' : 'ltr',\n      ariaTags: false,\n      beforeOnCellMouseOver: (event, coords) => {\n        _classPrivateFieldGet(_navigator, this).setCurrentPage(coords.row);\n      },\n      afterOnCellMouseOver: (event, coords) => {\n        if (this.isAllSubMenusClosed()) {\n          delayedOpenSubMenu(coords.row);\n        } else {\n          this.openSubMenu(coords.row);\n        }\n      },\n      rowHeights: row => filteredItems[row].name === SEPARATOR ? 1 : 23,\n      afterOnCellContextMenu: event => {\n        event.preventDefault();\n\n        // On the Windows platform, the \"contextmenu\" is triggered after the \"mouseup\" so that's\n        // why the closing menu is here. (#6507#issuecomment-582392301).\n        if (isWindowsOS() && shouldAutoCloseMenu && this.hasSelectedItem()) {\n          this.close(true);\n        }\n      },\n      afterSelection: (row, column, row2, column2, preventScrolling) => {\n        // do not scroll the viewport when mouse clicks on partially visible menu item\n        if (this.hotMenu.view.isMouseDown()) {\n          preventScrolling.value = true;\n        }\n        this.runLocalHooks('afterSelectionChange', this.getSelectedItem());\n      },\n      beforeOnCellMouseUp: event => {\n        if (this.hasSelectedItem()) {\n          shouldAutoCloseMenu = !this.isCommandPassive(this.getSelectedItem());\n          this.executeCommand(event);\n        }\n      },\n      afterOnCellMouseUp: event => {\n        // If the code runs on the other platform than Windows, the \"mouseup\" is triggered\n        // after the \"contextmenu\". So then \"mouseup\" closes the menu. Otherwise, the closing\n        // menu responsibility is forwarded to \"afterOnCellContextMenu\" callback (#6507#issuecomment-582392301).\n        if ((!isWindowsOS() || !isRightClick(event)) && shouldAutoCloseMenu && this.hasSelectedItem()) {\n          // The timeout is necessary only for mobile devices. For desktop, the click event that is fired\n          // right after the mouseup event gets the event element target the same as the mouseup event.\n          // For mobile devices, the click event is triggered with native delay (~300ms), so when the mouseup\n          // event hides the tapped element, the click event grabs the element below. As a result, the filter\n          // by condition menu is closed and immediately open on tapping the \"None\" item.\n          if (isMobileBrowser() || isIpadOS()) {\n            this.hot._registerTimeout(() => this.close(true), 325);\n          } else {\n            this.close(true);\n          }\n        }\n      },\n      afterUnlisten: () => {\n        // Restore menu focus, fix for `this.instance.unlisten();` call in the tableView.js@260 file.\n        // This prevents losing table responsiveness for keyboard events when filter select menu is closed (#6497).\n        if (!this.hasSelectedItem() && this.isOpened()) {\n          this.hotMenu.listen();\n        }\n      }\n    };\n    this.origOutsideClickDeselects = this.hot.getSettings().outsideClickDeselects;\n    this.hot.getSettings().outsideClickDeselects = false;\n    this.hotMenu = new this.hot.constructor(this.container, settings);\n    this.hotMenu.addHook('afterInit', () => this.onAfterInit());\n    this.hotMenu.init();\n    _classPrivateFieldSet(_navigator, this, createMenuNavigator(this.hotMenu));\n    _classPrivateFieldSet(_shortcutsCtrl, this, createKeyboardShortcutsCtrl(this));\n    _classPrivateFieldGet(_shortcutsCtrl, this).listen();\n    this.focus();\n    if (this.isSubMenu()) {\n      this.addLocalHook('afterOpen', () => this.parentMenu.runLocalHooks('afterSubmenuOpen', this));\n    }\n    this.runLocalHooks('afterOpen', this);\n  }\n\n  /**\n   * Close menu.\n   *\n   * @param {boolean} [closeParent=false] If `true` try to close parent menu if exists.\n   */\n  close() {\n    let closeParent = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    if (!this.isOpened()) {\n      return;\n    }\n    if (closeParent && this.isSubMenu()) {\n      this.parentMenu.close();\n    } else {\n      _classPrivateFieldGet(_navigator, this).clear();\n      this.closeAllSubMenus();\n      this.container.style.display = 'none';\n      this.hotMenu.destroy();\n      this.hotMenu = null;\n      this.hot.getSettings().outsideClickDeselects = this.origOutsideClickDeselects;\n      this.runLocalHooks('afterClose');\n      if (this.isSubMenu()) {\n        if (this.hot.getSettings().ariaTags) {\n          const selection = this.parentMenu.hotMenu.getSelectedLast();\n          if (selection) {\n            const cell = this.parentMenu.hotMenu.getCell(selection[0], 0);\n            setAttribute(cell, [A11Y_EXPANDED(false)]);\n          }\n        }\n        this.parentMenu.hotMenu.listen();\n      }\n    }\n  }\n\n  /**\n   * Open sub menu at the provided row index.\n   *\n   * @param {number} row Row index.\n   * @returns {Menu|boolean} Returns created menu or `false` if no one menu was created.\n   */\n  openSubMenu(row) {\n    if (!this.hotMenu) {\n      return false;\n    }\n    const cell = this.hotMenu.getCell(row, 0);\n    this.closeAllSubMenus();\n    if (!cell || !hasSubMenu(cell)) {\n      return false;\n    }\n    const dataItem = this.hotMenu.getSourceDataAtRow(row);\n    const subMenu = new Menu(this.hot, {\n      parent: this,\n      name: dataItem.name,\n      className: this.options.className,\n      keepInViewport: true,\n      container: this.options.container\n    });\n    subMenu.setMenuItems(dataItem.submenu.items);\n    subMenu.open();\n    subMenu.setPosition(cell.getBoundingClientRect());\n    this.hotSubMenus[dataItem.key] = subMenu;\n\n    // Update the accessibility tags on the cell being the base for the submenu.\n    if (this.hot.getSettings().ariaTags) {\n      setAttribute(cell, [A11Y_EXPANDED(true)]);\n    }\n    return subMenu;\n  }\n\n  /**\n   * Close sub menu at row index.\n   *\n   * @param {number} row Row index.\n   */\n  closeSubMenu(row) {\n    const dataItem = this.hotMenu.getSourceDataAtRow(row);\n    const menus = this.hotSubMenus[dataItem.key];\n    if (menus) {\n      menus.destroy();\n      delete this.hotSubMenus[dataItem.key];\n      const cell = this.hotMenu.getCell(row, 0);\n\n      // Update the accessibility tags on the cell being the base for the submenu.\n      if (this.hot.getSettings().ariaTags) {\n        setAttribute(cell, [A11Y_EXPANDED(false)]);\n      }\n    }\n  }\n\n  /**\n   * Close all opened sub menus.\n   */\n  closeAllSubMenus() {\n    arrayEach(this.hotMenu.getData(), (value, row) => this.closeSubMenu(row));\n  }\n\n  /**\n   * Checks if all created and opened sub menus are closed.\n   *\n   * @returns {boolean}\n   */\n  isAllSubMenusClosed() {\n    return Object.keys(this.hotSubMenus).length === 0;\n  }\n\n  /**\n   * Focus the menu so all keyboard shortcuts become active.\n   */\n  focus() {\n    if (this.isOpened()) {\n      this.hotMenu.rootElement.focus({\n        preventScroll: true\n      });\n      this.getKeyboardShortcutsCtrl().listen();\n      this.hotMenu.listen();\n    }\n  }\n\n  /**\n   * Destroy instance.\n   */\n  destroy() {\n    const menuContainerParentElement = this.container.parentNode;\n    this.clearLocalHooks();\n    this.close();\n    this.parentMenu = null;\n    this.eventManager.destroy();\n    if (menuContainerParentElement) {\n      menuContainerParentElement.removeChild(this.container);\n    }\n  }\n\n  /**\n   * Checks if menu was opened.\n   *\n   * @returns {boolean} Returns `true` if menu was opened.\n   */\n  isOpened() {\n    return this.hotMenu !== null;\n  }\n\n  /**\n   * Execute menu command.\n   *\n   * The `executeCommand()` method works only for selected cells.\n   *\n   * When no cells are selected, `executeCommand()` doesn't do anything.\n   *\n   * @param {Event} [event] The mouse event object.\n   */\n  executeCommand(event) {\n    if (!this.isOpened() || !this.hasSelectedItem()) {\n      return;\n    }\n    const selectedItem = this.getSelectedItem();\n    this.runLocalHooks('select', selectedItem, event);\n    if (this.isCommandPassive(selectedItem)) {\n      return;\n    }\n    const selRanges = this.hot.getSelectedRange();\n    const normalizedSelection = selRanges ? normalizeSelection(selRanges) : [];\n    this.runLocalHooks('executeCommand', selectedItem.key, normalizedSelection, event);\n    if (this.isSubMenu()) {\n      this.parentMenu.runLocalHooks('executeCommand', selectedItem.key, normalizedSelection, event);\n    }\n  }\n\n  /**\n   * Checks if the passed command is passive or not. The command is passive when it's marked as\n   * disabled, the descriptor object contains `isCommand` property set to `false`, command\n   * is a separator, or the item is recognized as submenu. For passive items the menu is not\n   * closed automatically after the user trigger the command through the UI.\n   *\n   * @param {object} commandDescriptor Selected menu item from the menu data source.\n   * @returns {boolean}\n   */\n  isCommandPassive(commandDescriptor) {\n    return commandDescriptor.isCommand === false || isItemSeparator(commandDescriptor) || isItemDisabled(commandDescriptor, this.hot) || isItemSubMenu(commandDescriptor);\n  }\n\n  /**\n   * Set offset menu position for specified area (`above`, `below`, `left` or `right`).\n   *\n   * @param {string} area Specified area name (`above`, `below`, `left` or `right`).\n   * @param {number} offset Offset value.\n   */\n  setOffset(area) {\n    let offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    this.positioner.setOffset(area, offset);\n  }\n\n  /**\n   * Set menu position based on dom event or based on literal object.\n   *\n   * @param {Event|object} coords Event or literal Object with coordinates.\n   */\n  setPosition(coords) {\n    if (this.isSubMenu()) {\n      this.positioner.setParentElement(this.parentMenu.container);\n    }\n    this.positioner.setElement(this.container).updatePosition(coords);\n  }\n\n  /**\n   * Create container/wrapper for handsontable.\n   *\n   * @private\n   * @param {string} [name] Class name.\n   * @returns {HTMLElement}\n   */\n  createContainer() {\n    let name = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    const doc = this.options.container.ownerDocument;\n    let className = name;\n    let container;\n    if (className) {\n      if (isFunction(className)) {\n        className = className.call(this.hot);\n        if (className === null || isUndefined(className)) {\n          className = '';\n        } else {\n          className = className.toString();\n        }\n      }\n      className = className.replace(/[^A-z0-9]/g, '_');\n      className = `${this.options.className}Sub_${className}`;\n      container = doc.querySelector(`.${this.options.className}.${className}`);\n    }\n    if (!container) {\n      container = doc.createElement('div');\n      addClass(container, `htMenu ${this.options.className}`);\n      if (className) {\n        addClass(container, className);\n      }\n      this.options.container.appendChild(container);\n    }\n    return container;\n  }\n\n  /**\n   * On after init listener.\n   *\n   * @private\n   */\n  onAfterInit() {\n    const {\n      wtTable\n    } = this.hotMenu.view._wt;\n    const data = this.hotMenu.getSettings().data;\n    const hiderStyle = wtTable.hider.style;\n    const holderStyle = wtTable.holder.style;\n    const currentHiderWidth = parseInt(hiderStyle.width, 10);\n    const realHeight = arrayReduce(data, (accumulator, value) => accumulator + (value.name === SEPARATOR ? 1 : 26), 0);\n\n    // Additional 3px to menu's size because of additional border around its `table.htCore`.\n    holderStyle.width = `${currentHiderWidth + 3}px`;\n    holderStyle.height = `${realHeight + 3}px`;\n    hiderStyle.height = holderStyle.height;\n\n    // Replace the default accessibility tags with the context menu's\n    if (this.hot.getSettings().ariaTags) {\n      setAttribute(this.hotMenu.rootElement, [A11Y_MENU(), A11Y_TABINDEX(-1)]);\n    }\n  }\n\n  /**\n   * Document mouse down listener.\n   *\n   * @private\n   * @param {Event} event The mouse event object.\n   */\n  onDocumentMouseDown(event) {\n    if (!this.isOpened()) {\n      return;\n    }\n\n    // Close menu when clicked element is not belongs to menu itself\n    if (this.options.standalone && this.hotMenu && !isChildOf(event.target, this.hotMenu.rootElement)) {\n      this.close(true);\n\n      // Automatically close menu when clicked element is not belongs to menu or submenu (not necessarily to itself)\n    } else if ((this.isAllSubMenusClosed() || this.isSubMenu()) && !isChildOf(event.target, '.htMenu')) {\n      this.close(true);\n    }\n  }\n\n  /**\n   * Document's contextmenu listener.\n   *\n   * @private\n   * @param {MouseEvent} event The mouse event object.\n   */\n  onDocumentContextMenu(event) {\n    if (!this.isOpened()) {\n      return;\n    }\n    if (hasClass(event.target, 'htCore') && isChildOf(event.target, this.hotMenu.rootElement)) {\n      event.preventDefault();\n    }\n  }\n}\nmixin(Menu, localHooks);"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}