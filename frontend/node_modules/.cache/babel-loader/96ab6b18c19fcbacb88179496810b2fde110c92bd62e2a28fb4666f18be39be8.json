{"ast":null,"code":"function _classPrivateMethodInitSpec(e, a) {\n  _checkPrivateRedeclaration(e, a), a.add(e);\n}\nfunction _classPrivateFieldInitSpec(e, t, a) {\n  _checkPrivateRedeclaration(e, t), t.set(e, a);\n}\nfunction _checkPrivateRedeclaration(e, t) {\n  if (t.has(e)) throw new TypeError(\"Cannot initialize the same private elements twice on an object\");\n}\nfunction _defineProperty(e, r, t) {\n  return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n    value: t,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : e[r] = t, e;\n}\nfunction _toPropertyKey(t) {\n  var i = _toPrimitive(t, \"string\");\n  return \"symbol\" == typeof i ? i : i + \"\";\n}\nfunction _toPrimitive(t, r) {\n  if (\"object\" != typeof t || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != typeof i) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nfunction _classPrivateFieldGet(s, a) {\n  return s.get(_assertClassBrand(s, a));\n}\nfunction _classPrivateFieldSet(s, a, r) {\n  return s.set(_assertClassBrand(s, a), r), r;\n}\nfunction _assertClassBrand(e, t, n) {\n  if (\"function\" == typeof e ? e === t : e.has(t)) return arguments.length < 3 ? t : n;\n  throw new TypeError(\"Private element is not present on this object\");\n}\nimport { BasePlugin } from \"../base/index.mjs\";\nimport DataManager from \"./data/dataManager.mjs\";\nimport CollapsingUI from \"./ui/collapsing.mjs\";\nimport HeadersUI from \"./ui/headers.mjs\";\nimport ContextMenuUI from \"./ui/contextMenu.mjs\";\nimport { error } from \"../../helpers/console.mjs\";\nimport { isArrayOfObjects } from \"../../helpers/data.mjs\";\nimport { TrimmingMap } from \"../../translations/index.mjs\";\nimport { EDITOR_EDIT_GROUP as SHORTCUTS_GROUP_EDITOR } from \"../../shortcutContexts/index.mjs\";\nimport RowMoveController from \"./utils/rowMoveController.mjs\";\nexport const PLUGIN_KEY = 'nestedRows';\nexport const PLUGIN_PRIORITY = 300;\nconst SHORTCUTS_GROUP = PLUGIN_KEY;\n\n/* eslint-disable jsdoc/require-description-complete-sentence */\n/**\n * Error message for the wrong data type error.\n */\nconst WRONG_DATA_TYPE_ERROR = 'The Nested Rows plugin requires an Array of Objects as a dataset to be' + ' provided. The plugin has been disabled.';\n\n/**\n * @plugin NestedRows\n * @class NestedRows\n *\n * @description\n * Plugin responsible for displaying and operating on data sources with nested structures.\n */\nvar _skipRender = /*#__PURE__*/new WeakMap();\nvar _skipCoreAPIModifiers = /*#__PURE__*/new WeakMap();\nvar _NestedRows_brand = /*#__PURE__*/new WeakSet();\nexport class NestedRows extends BasePlugin {\n  constructor() {\n    super(...arguments);\n    /**\n     * `beforeRowMove` hook callback.\n     *\n     * @param {Array} rows Array of visual row indexes to be moved.\n     * @param {number} finalIndex Visual row index, being a start index for the moved rows. Points to where the elements\n     *   will be placed after the moving action. To check the visualization of the final index, please take a look at\n     *   [documentation](@/guides/rows/row-summary/row-summary.md).\n     * @param {undefined|number} dropIndex Visual row index, being a drop index for the moved rows. Points to where we\n     *   are going to drop the moved elements. To check visualization of drop index please take a look at\n     *   [documentation](@/guides/rows/row-summary/row-summary.md).\n     * @param {boolean} movePossible Indicates if it's possible to move rows to the desired position.\n     * @fires Hooks#afterRowMove\n     * @returns {boolean}\n     */\n    _classPrivateMethodInitSpec(this, _NestedRows_brand);\n    /**\n     * Reference to the DataManager instance.\n     *\n     * @private\n     * @type {object}\n     */\n    _defineProperty(this, \"dataManager\", null);\n    /**\n     * Reference to the HeadersUI instance.\n     *\n     * @private\n     * @type {object}\n     */\n    _defineProperty(this, \"headersUI\", null);\n    /**\n     * Map of skipped rows by plugin.\n     *\n     * @private\n     * @type {null|TrimmingMap}\n     */\n    _defineProperty(this, \"collapsedRowsMap\", null);\n    /**\n     * Allows skipping the render cycle if set as `true`.\n     *\n     * @type {boolean}\n     */\n    _classPrivateFieldInitSpec(this, _skipRender, false);\n    /**\n     * Allows skipping the internal Core methods call if set as `true`.\n     *\n     * @type {boolean}\n     */\n    _classPrivateFieldInitSpec(this, _skipCoreAPIModifiers, false);\n  }\n  static get PLUGIN_KEY() {\n    return PLUGIN_KEY;\n  }\n  static get PLUGIN_PRIORITY() {\n    return PLUGIN_PRIORITY;\n  }\n  /**\n   * Checks if the plugin is enabled in the handsontable settings. This method is executed in {@link Hooks#beforeInit}\n   * hook and if it returns `true` then the {@link NestedRows#enablePlugin} method is called.\n   *\n   * @returns {boolean}\n   */\n  isEnabled() {\n    return !!this.hot.getSettings()[PLUGIN_KEY];\n  }\n\n  /**\n   * Enables the plugin functionality for this Handsontable instance.\n   */\n  enablePlugin() {\n    var _this = this;\n    if (this.enabled) {\n      return;\n    }\n    this.collapsedRowsMap = this.hot.rowIndexMapper.registerMap('nestedRows', new TrimmingMap());\n    this.dataManager = new DataManager(this, this.hot);\n    this.collapsingUI = new CollapsingUI(this, this.hot);\n    this.headersUI = new HeadersUI(this, this.hot);\n    this.contextMenuUI = new ContextMenuUI(this, this.hot);\n    this.rowMoveController = new RowMoveController(this);\n    this.addHook('afterInit', function () {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      return _assertClassBrand(_NestedRows_brand, _this, _onAfterInit).call(_this, ...args);\n    });\n    this.addHook('beforeViewRender', function () {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n      return _assertClassBrand(_NestedRows_brand, _this, _onBeforeViewRender).call(_this, ...args);\n    });\n    this.addHook('modifyRowData', function () {\n      return _this.onModifyRowData(...arguments);\n    });\n    this.addHook('modifySourceLength', function () {\n      return _this.onModifySourceLength(...arguments);\n    });\n    this.addHook('beforeDataSplice', function () {\n      return _this.onBeforeDataSplice(...arguments);\n    });\n    this.addHook('filterData', function () {\n      for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        args[_key3] = arguments[_key3];\n      }\n      return _assertClassBrand(_NestedRows_brand, _this, _onFilterData).call(_this, ...args);\n    });\n    this.addHook('afterContextMenuDefaultOptions', function () {\n      for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n        args[_key4] = arguments[_key4];\n      }\n      return _assertClassBrand(_NestedRows_brand, _this, _onAfterContextMenuDefaultOptions).call(_this, ...args);\n    });\n    this.addHook('afterGetRowHeader', function () {\n      for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n        args[_key5] = arguments[_key5];\n      }\n      return _assertClassBrand(_NestedRows_brand, _this, _onAfterGetRowHeader).call(_this, ...args);\n    });\n    this.addHook('beforeOnCellMouseDown', function () {\n      for (var _len6 = arguments.length, args = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n        args[_key6] = arguments[_key6];\n      }\n      return _assertClassBrand(_NestedRows_brand, _this, _onBeforeOnCellMouseDown).call(_this, ...args);\n    });\n    this.addHook('beforeRemoveRow', function () {\n      for (var _len7 = arguments.length, args = new Array(_len7), _key7 = 0; _key7 < _len7; _key7++) {\n        args[_key7] = arguments[_key7];\n      }\n      return _assertClassBrand(_NestedRows_brand, _this, _onBeforeRemoveRow).call(_this, ...args);\n    });\n    this.addHook('afterRemoveRow', function () {\n      for (var _len8 = arguments.length, args = new Array(_len8), _key8 = 0; _key8 < _len8; _key8++) {\n        args[_key8] = arguments[_key8];\n      }\n      return _assertClassBrand(_NestedRows_brand, _this, _onAfterRemoveRow).call(_this, ...args);\n    });\n    this.addHook('beforeAddChild', function () {\n      for (var _len9 = arguments.length, args = new Array(_len9), _key9 = 0; _key9 < _len9; _key9++) {\n        args[_key9] = arguments[_key9];\n      }\n      return _assertClassBrand(_NestedRows_brand, _this, _onBeforeAddChild).call(_this, ...args);\n    });\n    this.addHook('afterAddChild', function () {\n      for (var _len10 = arguments.length, args = new Array(_len10), _key10 = 0; _key10 < _len10; _key10++) {\n        args[_key10] = arguments[_key10];\n      }\n      return _assertClassBrand(_NestedRows_brand, _this, _onAfterAddChild).call(_this, ...args);\n    });\n    this.addHook('beforeDetachChild', function () {\n      for (var _len11 = arguments.length, args = new Array(_len11), _key11 = 0; _key11 < _len11; _key11++) {\n        args[_key11] = arguments[_key11];\n      }\n      return _assertClassBrand(_NestedRows_brand, _this, _onBeforeDetachChild).call(_this, ...args);\n    });\n    this.addHook('afterDetachChild', function () {\n      for (var _len12 = arguments.length, args = new Array(_len12), _key12 = 0; _key12 < _len12; _key12++) {\n        args[_key12] = arguments[_key12];\n      }\n      return _assertClassBrand(_NestedRows_brand, _this, _onAfterDetachChild).call(_this, ...args);\n    });\n    this.addHook('modifyRowHeaderWidth', function () {\n      for (var _len13 = arguments.length, args = new Array(_len13), _key13 = 0; _key13 < _len13; _key13++) {\n        args[_key13] = arguments[_key13];\n      }\n      return _assertClassBrand(_NestedRows_brand, _this, _onModifyRowHeaderWidth).call(_this, ...args);\n    });\n    this.addHook('afterCreateRow', function () {\n      for (var _len14 = arguments.length, args = new Array(_len14), _key14 = 0; _key14 < _len14; _key14++) {\n        args[_key14] = arguments[_key14];\n      }\n      return _assertClassBrand(_NestedRows_brand, _this, _onAfterCreateRow).call(_this, ...args);\n    });\n    this.addHook('beforeRowMove', function () {\n      for (var _len15 = arguments.length, args = new Array(_len15), _key15 = 0; _key15 < _len15; _key15++) {\n        args[_key15] = arguments[_key15];\n      }\n      return _assertClassBrand(_NestedRows_brand, _this, _onBeforeRowMove).call(_this, ...args);\n    });\n    this.addHook('beforeLoadData', data => _assertClassBrand(_NestedRows_brand, this, _onBeforeLoadData).call(this, data));\n    this.addHook('beforeUpdateData', data => _assertClassBrand(_NestedRows_brand, this, _onBeforeLoadData).call(this, data));\n    this.registerShortcuts();\n    super.enablePlugin();\n  }\n\n  /**\n   * Disables the plugin functionality for this Handsontable instance.\n   */\n  disablePlugin() {\n    this.hot.rowIndexMapper.unregisterMap('nestedRows');\n    this.unregisterShortcuts();\n    super.disablePlugin();\n  }\n\n  /**\n   * Updates the plugin's state.\n   *\n   * This method is executed when [`updateSettings()`](@/api/core.md#updatesettings) is invoked with any of the following configuration options:\n   *  - [`nestedRows`](@/api/options.md#nestedrows)\n   */\n  updatePlugin() {\n    this.disablePlugin();\n\n    // We store a state of the data manager.\n    const currentSourceData = this.dataManager.getData();\n    this.enablePlugin();\n\n    // After enabling plugin previously stored data is restored.\n    this.dataManager.updateWithData(currentSourceData);\n    super.updatePlugin();\n  }\n\n  /**\n   * Register shortcuts responsible for toggling collapsible columns.\n   *\n   * @private\n   */\n  registerShortcuts() {\n    this.hot.getShortcutManager().getContext('grid').addShortcut({\n      keys: [['Enter']],\n      callback: () => {\n        const {\n          highlight\n        } = this.hot.getSelectedRangeLast();\n        const row = this.collapsingUI.translateTrimmedRow(highlight.row);\n        if (this.collapsingUI.areChildrenCollapsed(row)) {\n          this.collapsingUI.expandChildren(row);\n        } else {\n          this.collapsingUI.collapseChildren(row);\n        }\n\n        // prevent default Enter behavior (move to the next row within a selection range)\n        return false;\n      },\n      runOnlyIf: () => {\n        var _this$hot$getSelected, _this$hot$getSelected2;\n        const highlight = (_this$hot$getSelected = this.hot.getSelectedRangeLast()) === null || _this$hot$getSelected === void 0 ? void 0 : _this$hot$getSelected.highlight;\n        return highlight && ((_this$hot$getSelected2 = this.hot.getSelectedRangeLast()) === null || _this$hot$getSelected2 === void 0 ? void 0 : _this$hot$getSelected2.isSingle()) && this.hot.selection.isCellVisible(highlight) && highlight.col === -1 && highlight.row >= 0;\n      },\n      group: SHORTCUTS_GROUP,\n      relativeToGroup: SHORTCUTS_GROUP_EDITOR,\n      position: 'before'\n    });\n  }\n\n  /**\n   * Unregister shortcuts responsible for toggling collapsible columns.\n   *\n   * @private\n   */\n  unregisterShortcuts() {\n    this.hot.getShortcutManager().getContext('grid').removeShortcutsByGroup(SHORTCUTS_GROUP);\n  }\n  /**\n   * Enable the modify hook skipping flag - allows retrieving the data from Handsontable without this plugin's\n   * modifications.\n   *\n   * @private\n   */\n  disableCoreAPIModifiers() {\n    _classPrivateFieldSet(_skipCoreAPIModifiers, this, true);\n  }\n\n  /**\n   * Disable the modify hook skipping flag.\n   *\n   * @private\n   */\n  enableCoreAPIModifiers() {\n    _classPrivateFieldSet(_skipCoreAPIModifiers, this, false);\n  }\n\n  /**\n   * `beforeOnCellMousedown` hook callback.\n   *\n   * @param {MouseEvent} event Mousedown event.\n   * @param {object} coords Cell coords.\n   * @param {HTMLElement} TD Clicked cell.\n   */\n\n  /**\n   * The modifyRowData hook callback.\n   *\n   * @private\n   * @param {number} row Visual row index.\n   * @returns {boolean}\n   */\n  onModifyRowData(row) {\n    if (_classPrivateFieldGet(_skipCoreAPIModifiers, this)) {\n      return;\n    }\n    return this.dataManager.getDataObject(row);\n  }\n\n  /**\n   * Modify the source data length to match the length of the nested structure.\n   *\n   * @private\n   * @returns {number}\n   */\n  onModifySourceLength() {\n    if (_classPrivateFieldGet(_skipCoreAPIModifiers, this)) {\n      return;\n    }\n    return this.dataManager.countAllRows();\n  }\n\n  /**\n   * @private\n   * @param {number} index The index where the data was spliced.\n   * @param {number} amount An amount of items to remove.\n   * @param {object} element An element to add.\n   * @returns {boolean}\n   */\n  onBeforeDataSplice(index, amount, element) {\n    if (_classPrivateFieldGet(_skipCoreAPIModifiers, this) || this.dataManager.isRowHighestLevel(index)) {\n      return true;\n    }\n    this.dataManager.spliceData(index, amount, element);\n    return false;\n  }\n\n  /**\n   * Provide custom source data filtering. It's handled by core method and replaces the native filtering.\n   *\n   * @param {number} index The index where the data filtering starts.\n   * @param {number} amount An amount of rows which filtering applies to.\n   * @param {number} physicalRows Physical row indexes.\n   * @returns {Array}\n   */\n\n  /**\n   * Destroys the plugin instance.\n   */\n  destroy() {\n    super.destroy();\n  }\n}\nfunction _onBeforeRowMove(rows, finalIndex, dropIndex, movePossible) {\n  return this.rowMoveController.onBeforeRowMove(rows, finalIndex, dropIndex, movePossible);\n}\nfunction _onBeforeOnCellMouseDown(event, coords, TD) {\n  this.collapsingUI.toggleState(event, coords, TD);\n}\nfunction _onFilterData(index, amount, physicalRows) {\n  this.collapsingUI.collapsedRowsStash.stash();\n  this.collapsingUI.collapsedRowsStash.trimStash(physicalRows[0], amount);\n  this.collapsingUI.collapsedRowsStash.shiftStash(physicalRows[0], null, -1 * amount);\n  this.dataManager.filterData(index, amount, physicalRows);\n  _classPrivateFieldSet(_skipRender, this, true);\n  return this.dataManager.getData().slice(); // Data contains reference sometimes.\n}\n/**\n * `afterContextMenuDefaultOptions` hook callback.\n *\n * @param {object} defaultOptions The default context menu items order.\n * @returns {boolean}\n */\nfunction _onAfterContextMenuDefaultOptions(defaultOptions) {\n  return this.contextMenuUI.appendOptions(defaultOptions);\n}\n/**\n * `afterGetRowHeader` hook callback.\n *\n * @param {number} row Row index.\n * @param {HTMLElement} TH Row header element.\n */\nfunction _onAfterGetRowHeader(row, TH) {\n  this.headersUI.appendLevelIndicators(row, TH);\n}\n/**\n * `modifyRowHeaderWidth` hook callback.\n *\n * @param {number} rowHeaderWidth The initial row header width(s).\n * @returns {number}\n */\nfunction _onModifyRowHeaderWidth(rowHeaderWidth) {\n  return Math.max(this.headersUI.rowHeaderWidthCache, rowHeaderWidth);\n}\n/**\n * `onAfterRemoveRow` hook callback.\n *\n * @param {number} index Removed row.\n * @param {number} amount Amount of removed rows.\n * @param {Array} logicRows An array of the removed physical rows.\n * @param {string} source Source of action.\n */\nfunction _onAfterRemoveRow(index, amount, logicRows, source) {\n  if (source === this.pluginName) {\n    return;\n  }\n  this.hot._registerTimeout(() => {\n    _classPrivateFieldSet(_skipRender, this, false);\n    this.headersUI.updateRowHeaderWidth();\n    this.collapsingUI.collapsedRowsStash.applyStash();\n  });\n}\n/**\n * Callback for the `beforeRemoveRow` change list of removed physical indexes by reference. Removing parent node\n * has effect in removing children nodes.\n *\n * @param {number} index Visual index of starter row.\n * @param {number} amount Amount of rows to be removed.\n * @param {Array} physicalRows List of physical indexes.\n */\nfunction _onBeforeRemoveRow(index, amount, physicalRows) {\n  const modifiedPhysicalRows = Array.from(physicalRows.reduce((removedRows, physicalIndex) => {\n    if (this.dataManager.isParent(physicalIndex)) {\n      const children = this.dataManager.getDataObject(physicalIndex).__children;\n\n      // Preserve a parent in the list of removed rows.\n      removedRows.add(physicalIndex);\n      if (Array.isArray(children)) {\n        // Add a children to the list of removed rows.\n        children.forEach(child => removedRows.add(this.dataManager.getRowIndex(child)));\n      }\n      return removedRows;\n    }\n\n    // Don't modify list of removed rows when already checked element isn't a parent.\n    return removedRows.add(physicalIndex);\n  }, new Set()));\n\n  // Modifying hook's argument by the reference.\n  physicalRows.length = 0;\n  physicalRows.push(...modifiedPhysicalRows);\n}\n/**\n * `beforeAddChild` hook callback.\n */\nfunction _onBeforeAddChild() {\n  this.collapsingUI.collapsedRowsStash.stash();\n}\n/**\n * `afterAddChild` hook callback.\n *\n * @param {object} parent Parent element.\n * @param {object} element New child element.\n */\nfunction _onAfterAddChild(parent, element) {\n  this.collapsingUI.collapsedRowsStash.shiftStash(this.dataManager.getRowIndex(element));\n  this.collapsingUI.collapsedRowsStash.applyStash();\n  this.headersUI.updateRowHeaderWidth();\n}\n/**\n * `beforeDetachChild` hook callback.\n */\nfunction _onBeforeDetachChild() {\n  this.collapsingUI.collapsedRowsStash.stash();\n}\n/**\n * `afterDetachChild` hook callback.\n *\n * @param {object} parent Parent element.\n * @param {object} element New child element.\n * @param {number} finalElementRowIndex The final row index of the detached element.\n */\nfunction _onAfterDetachChild(parent, element, finalElementRowIndex) {\n  this.collapsingUI.collapsedRowsStash.shiftStash(finalElementRowIndex, null, -1);\n  this.collapsingUI.collapsedRowsStash.applyStash();\n  this.headersUI.updateRowHeaderWidth();\n}\n/**\n * `afterCreateRow` hook callback.\n */\nfunction _onAfterCreateRow() {\n  this.dataManager.rewriteCache();\n}\n/**\n * `afterInit` hook callback.\n */\nfunction _onAfterInit() {\n  this.headersUI.updateRowHeaderWidth();\n}\n/**\n * `beforeViewRender` hook callback.\n *\n * @param {boolean} force Indicates if the render call was triggered by a change of settings or data.\n * @param {object} skipRender An object, holder for skipRender functionality.\n */\nfunction _onBeforeViewRender(force, skipRender) {\n  if (_classPrivateFieldGet(_skipRender, this)) {\n    skipRender.skipRender = true;\n  }\n}\n/**\n * `beforeLoadData` hook callback.\n *\n * @param {Array} data The source data.\n */\nfunction _onBeforeLoadData(data) {\n  if (!isArrayOfObjects(data)) {\n    error(WRONG_DATA_TYPE_ERROR);\n    this.hot.getSettings()[PLUGIN_KEY] = false;\n    this.disablePlugin();\n    return;\n  }\n  this.dataManager.setData(data);\n  this.dataManager.rewriteCache();\n}","map":{"version":3,"names":["_classPrivateMethodInitSpec","e","a","_checkPrivateRedeclaration","add","_classPrivateFieldInitSpec","t","set","has","TypeError","_defineProperty","r","_toPropertyKey","Object","defineProperty","value","enumerable","configurable","writable","i","_toPrimitive","Symbol","toPrimitive","call","String","Number","_classPrivateFieldGet","s","get","_assertClassBrand","_classPrivateFieldSet","n","arguments","length","BasePlugin","DataManager","CollapsingUI","HeadersUI","ContextMenuUI","error","isArrayOfObjects","TrimmingMap","EDITOR_EDIT_GROUP","SHORTCUTS_GROUP_EDITOR","RowMoveController","PLUGIN_KEY","PLUGIN_PRIORITY","SHORTCUTS_GROUP","WRONG_DATA_TYPE_ERROR","_skipRender","WeakMap","_skipCoreAPIModifiers","_NestedRows_brand","WeakSet","NestedRows","constructor","isEnabled","hot","getSettings","enablePlugin","_this","enabled","collapsedRowsMap","rowIndexMapper","registerMap","dataManager","collapsingUI","headersUI","contextMenuUI","rowMoveController","addHook","_len","args","Array","_key","_onAfterInit","_len2","_key2","_onBeforeViewRender","onModifyRowData","onModifySourceLength","onBeforeDataSplice","_len3","_key3","_onFilterData","_len4","_key4","_onAfterContextMenuDefaultOptions","_len5","_key5","_onAfterGetRowHeader","_len6","_key6","_onBeforeOnCellMouseDown","_len7","_key7","_onBeforeRemoveRow","_len8","_key8","_onAfterRemoveRow","_len9","_key9","_onBeforeAddChild","_len10","_key10","_onAfterAddChild","_len11","_key11","_onBeforeDetachChild","_len12","_key12","_onAfterDetachChild","_len13","_key13","_onModifyRowHeaderWidth","_len14","_key14","_onAfterCreateRow","_len15","_key15","_onBeforeRowMove","data","_onBeforeLoadData","registerShortcuts","disablePlugin","unregisterMap","unregisterShortcuts","updatePlugin","currentSourceData","getData","updateWithData","getShortcutManager","getContext","addShortcut","keys","callback","highlight","getSelectedRangeLast","row","translateTrimmedRow","areChildrenCollapsed","expandChildren","collapseChildren","runOnlyIf","_this$hot$getSelected","_this$hot$getSelected2","isSingle","selection","isCellVisible","col","group","relativeToGroup","position","removeShortcutsByGroup","disableCoreAPIModifiers","enableCoreAPIModifiers","getDataObject","countAllRows","index","amount","element","isRowHighestLevel","spliceData","destroy","rows","finalIndex","dropIndex","movePossible","onBeforeRowMove","event","coords","TD","toggleState","physicalRows","collapsedRowsStash","stash","trimStash","shiftStash","filterData","slice","defaultOptions","appendOptions","TH","appendLevelIndicators","rowHeaderWidth","Math","max","rowHeaderWidthCache","logicRows","source","pluginName","_registerTimeout","updateRowHeaderWidth","applyStash","modifiedPhysicalRows","from","reduce","removedRows","physicalIndex","isParent","children","__children","isArray","forEach","child","getRowIndex","Set","push","parent","finalElementRowIndex","rewriteCache","force","skipRender","setData"],"sources":["D:/gym-project/frontend/node_modules/handsontable/plugins/nestedRows/nestedRows.mjs"],"sourcesContent":["import \"core-js/modules/es.error.cause.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/esnext.set.difference.v2.js\";\nimport \"core-js/modules/esnext.set.intersection.v2.js\";\nimport \"core-js/modules/esnext.set.is-disjoint-from.v2.js\";\nimport \"core-js/modules/esnext.set.is-subset-of.v2.js\";\nimport \"core-js/modules/esnext.set.is-superset-of.v2.js\";\nimport \"core-js/modules/esnext.set.symmetric-difference.v2.js\";\nimport \"core-js/modules/esnext.set.union.v2.js\";\nfunction _classPrivateMethodInitSpec(e, a) { _checkPrivateRedeclaration(e, a), a.add(e); }\nfunction _classPrivateFieldInitSpec(e, t, a) { _checkPrivateRedeclaration(e, t), t.set(e, a); }\nfunction _checkPrivateRedeclaration(e, t) { if (t.has(e)) throw new TypeError(\"Cannot initialize the same private elements twice on an object\"); }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _classPrivateFieldGet(s, a) { return s.get(_assertClassBrand(s, a)); }\nfunction _classPrivateFieldSet(s, a, r) { return s.set(_assertClassBrand(s, a), r), r; }\nfunction _assertClassBrand(e, t, n) { if (\"function\" == typeof e ? e === t : e.has(t)) return arguments.length < 3 ? t : n; throw new TypeError(\"Private element is not present on this object\"); }\nimport { BasePlugin } from \"../base/index.mjs\";\nimport DataManager from \"./data/dataManager.mjs\";\nimport CollapsingUI from \"./ui/collapsing.mjs\";\nimport HeadersUI from \"./ui/headers.mjs\";\nimport ContextMenuUI from \"./ui/contextMenu.mjs\";\nimport { error } from \"../../helpers/console.mjs\";\nimport { isArrayOfObjects } from \"../../helpers/data.mjs\";\nimport { TrimmingMap } from \"../../translations/index.mjs\";\nimport { EDITOR_EDIT_GROUP as SHORTCUTS_GROUP_EDITOR } from \"../../shortcutContexts/index.mjs\";\nimport RowMoveController from \"./utils/rowMoveController.mjs\";\nexport const PLUGIN_KEY = 'nestedRows';\nexport const PLUGIN_PRIORITY = 300;\nconst SHORTCUTS_GROUP = PLUGIN_KEY;\n\n/* eslint-disable jsdoc/require-description-complete-sentence */\n/**\n * Error message for the wrong data type error.\n */\nconst WRONG_DATA_TYPE_ERROR = 'The Nested Rows plugin requires an Array of Objects as a dataset to be' + ' provided. The plugin has been disabled.';\n\n/**\n * @plugin NestedRows\n * @class NestedRows\n *\n * @description\n * Plugin responsible for displaying and operating on data sources with nested structures.\n */\nvar _skipRender = /*#__PURE__*/new WeakMap();\nvar _skipCoreAPIModifiers = /*#__PURE__*/new WeakMap();\nvar _NestedRows_brand = /*#__PURE__*/new WeakSet();\nexport class NestedRows extends BasePlugin {\n  constructor() {\n    super(...arguments);\n    /**\n     * `beforeRowMove` hook callback.\n     *\n     * @param {Array} rows Array of visual row indexes to be moved.\n     * @param {number} finalIndex Visual row index, being a start index for the moved rows. Points to where the elements\n     *   will be placed after the moving action. To check the visualization of the final index, please take a look at\n     *   [documentation](@/guides/rows/row-summary/row-summary.md).\n     * @param {undefined|number} dropIndex Visual row index, being a drop index for the moved rows. Points to where we\n     *   are going to drop the moved elements. To check visualization of drop index please take a look at\n     *   [documentation](@/guides/rows/row-summary/row-summary.md).\n     * @param {boolean} movePossible Indicates if it's possible to move rows to the desired position.\n     * @fires Hooks#afterRowMove\n     * @returns {boolean}\n     */\n    _classPrivateMethodInitSpec(this, _NestedRows_brand);\n    /**\n     * Reference to the DataManager instance.\n     *\n     * @private\n     * @type {object}\n     */\n    _defineProperty(this, \"dataManager\", null);\n    /**\n     * Reference to the HeadersUI instance.\n     *\n     * @private\n     * @type {object}\n     */\n    _defineProperty(this, \"headersUI\", null);\n    /**\n     * Map of skipped rows by plugin.\n     *\n     * @private\n     * @type {null|TrimmingMap}\n     */\n    _defineProperty(this, \"collapsedRowsMap\", null);\n    /**\n     * Allows skipping the render cycle if set as `true`.\n     *\n     * @type {boolean}\n     */\n    _classPrivateFieldInitSpec(this, _skipRender, false);\n    /**\n     * Allows skipping the internal Core methods call if set as `true`.\n     *\n     * @type {boolean}\n     */\n    _classPrivateFieldInitSpec(this, _skipCoreAPIModifiers, false);\n  }\n  static get PLUGIN_KEY() {\n    return PLUGIN_KEY;\n  }\n  static get PLUGIN_PRIORITY() {\n    return PLUGIN_PRIORITY;\n  }\n  /**\n   * Checks if the plugin is enabled in the handsontable settings. This method is executed in {@link Hooks#beforeInit}\n   * hook and if it returns `true` then the {@link NestedRows#enablePlugin} method is called.\n   *\n   * @returns {boolean}\n   */\n  isEnabled() {\n    return !!this.hot.getSettings()[PLUGIN_KEY];\n  }\n\n  /**\n   * Enables the plugin functionality for this Handsontable instance.\n   */\n  enablePlugin() {\n    var _this = this;\n    if (this.enabled) {\n      return;\n    }\n    this.collapsedRowsMap = this.hot.rowIndexMapper.registerMap('nestedRows', new TrimmingMap());\n    this.dataManager = new DataManager(this, this.hot);\n    this.collapsingUI = new CollapsingUI(this, this.hot);\n    this.headersUI = new HeadersUI(this, this.hot);\n    this.contextMenuUI = new ContextMenuUI(this, this.hot);\n    this.rowMoveController = new RowMoveController(this);\n    this.addHook('afterInit', function () {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      return _assertClassBrand(_NestedRows_brand, _this, _onAfterInit).call(_this, ...args);\n    });\n    this.addHook('beforeViewRender', function () {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n      return _assertClassBrand(_NestedRows_brand, _this, _onBeforeViewRender).call(_this, ...args);\n    });\n    this.addHook('modifyRowData', function () {\n      return _this.onModifyRowData(...arguments);\n    });\n    this.addHook('modifySourceLength', function () {\n      return _this.onModifySourceLength(...arguments);\n    });\n    this.addHook('beforeDataSplice', function () {\n      return _this.onBeforeDataSplice(...arguments);\n    });\n    this.addHook('filterData', function () {\n      for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        args[_key3] = arguments[_key3];\n      }\n      return _assertClassBrand(_NestedRows_brand, _this, _onFilterData).call(_this, ...args);\n    });\n    this.addHook('afterContextMenuDefaultOptions', function () {\n      for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n        args[_key4] = arguments[_key4];\n      }\n      return _assertClassBrand(_NestedRows_brand, _this, _onAfterContextMenuDefaultOptions).call(_this, ...args);\n    });\n    this.addHook('afterGetRowHeader', function () {\n      for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n        args[_key5] = arguments[_key5];\n      }\n      return _assertClassBrand(_NestedRows_brand, _this, _onAfterGetRowHeader).call(_this, ...args);\n    });\n    this.addHook('beforeOnCellMouseDown', function () {\n      for (var _len6 = arguments.length, args = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n        args[_key6] = arguments[_key6];\n      }\n      return _assertClassBrand(_NestedRows_brand, _this, _onBeforeOnCellMouseDown).call(_this, ...args);\n    });\n    this.addHook('beforeRemoveRow', function () {\n      for (var _len7 = arguments.length, args = new Array(_len7), _key7 = 0; _key7 < _len7; _key7++) {\n        args[_key7] = arguments[_key7];\n      }\n      return _assertClassBrand(_NestedRows_brand, _this, _onBeforeRemoveRow).call(_this, ...args);\n    });\n    this.addHook('afterRemoveRow', function () {\n      for (var _len8 = arguments.length, args = new Array(_len8), _key8 = 0; _key8 < _len8; _key8++) {\n        args[_key8] = arguments[_key8];\n      }\n      return _assertClassBrand(_NestedRows_brand, _this, _onAfterRemoveRow).call(_this, ...args);\n    });\n    this.addHook('beforeAddChild', function () {\n      for (var _len9 = arguments.length, args = new Array(_len9), _key9 = 0; _key9 < _len9; _key9++) {\n        args[_key9] = arguments[_key9];\n      }\n      return _assertClassBrand(_NestedRows_brand, _this, _onBeforeAddChild).call(_this, ...args);\n    });\n    this.addHook('afterAddChild', function () {\n      for (var _len10 = arguments.length, args = new Array(_len10), _key10 = 0; _key10 < _len10; _key10++) {\n        args[_key10] = arguments[_key10];\n      }\n      return _assertClassBrand(_NestedRows_brand, _this, _onAfterAddChild).call(_this, ...args);\n    });\n    this.addHook('beforeDetachChild', function () {\n      for (var _len11 = arguments.length, args = new Array(_len11), _key11 = 0; _key11 < _len11; _key11++) {\n        args[_key11] = arguments[_key11];\n      }\n      return _assertClassBrand(_NestedRows_brand, _this, _onBeforeDetachChild).call(_this, ...args);\n    });\n    this.addHook('afterDetachChild', function () {\n      for (var _len12 = arguments.length, args = new Array(_len12), _key12 = 0; _key12 < _len12; _key12++) {\n        args[_key12] = arguments[_key12];\n      }\n      return _assertClassBrand(_NestedRows_brand, _this, _onAfterDetachChild).call(_this, ...args);\n    });\n    this.addHook('modifyRowHeaderWidth', function () {\n      for (var _len13 = arguments.length, args = new Array(_len13), _key13 = 0; _key13 < _len13; _key13++) {\n        args[_key13] = arguments[_key13];\n      }\n      return _assertClassBrand(_NestedRows_brand, _this, _onModifyRowHeaderWidth).call(_this, ...args);\n    });\n    this.addHook('afterCreateRow', function () {\n      for (var _len14 = arguments.length, args = new Array(_len14), _key14 = 0; _key14 < _len14; _key14++) {\n        args[_key14] = arguments[_key14];\n      }\n      return _assertClassBrand(_NestedRows_brand, _this, _onAfterCreateRow).call(_this, ...args);\n    });\n    this.addHook('beforeRowMove', function () {\n      for (var _len15 = arguments.length, args = new Array(_len15), _key15 = 0; _key15 < _len15; _key15++) {\n        args[_key15] = arguments[_key15];\n      }\n      return _assertClassBrand(_NestedRows_brand, _this, _onBeforeRowMove).call(_this, ...args);\n    });\n    this.addHook('beforeLoadData', data => _assertClassBrand(_NestedRows_brand, this, _onBeforeLoadData).call(this, data));\n    this.addHook('beforeUpdateData', data => _assertClassBrand(_NestedRows_brand, this, _onBeforeLoadData).call(this, data));\n    this.registerShortcuts();\n    super.enablePlugin();\n  }\n\n  /**\n   * Disables the plugin functionality for this Handsontable instance.\n   */\n  disablePlugin() {\n    this.hot.rowIndexMapper.unregisterMap('nestedRows');\n    this.unregisterShortcuts();\n    super.disablePlugin();\n  }\n\n  /**\n   * Updates the plugin's state.\n   *\n   * This method is executed when [`updateSettings()`](@/api/core.md#updatesettings) is invoked with any of the following configuration options:\n   *  - [`nestedRows`](@/api/options.md#nestedrows)\n   */\n  updatePlugin() {\n    this.disablePlugin();\n\n    // We store a state of the data manager.\n    const currentSourceData = this.dataManager.getData();\n    this.enablePlugin();\n\n    // After enabling plugin previously stored data is restored.\n    this.dataManager.updateWithData(currentSourceData);\n    super.updatePlugin();\n  }\n\n  /**\n   * Register shortcuts responsible for toggling collapsible columns.\n   *\n   * @private\n   */\n  registerShortcuts() {\n    this.hot.getShortcutManager().getContext('grid').addShortcut({\n      keys: [['Enter']],\n      callback: () => {\n        const {\n          highlight\n        } = this.hot.getSelectedRangeLast();\n        const row = this.collapsingUI.translateTrimmedRow(highlight.row);\n        if (this.collapsingUI.areChildrenCollapsed(row)) {\n          this.collapsingUI.expandChildren(row);\n        } else {\n          this.collapsingUI.collapseChildren(row);\n        }\n\n        // prevent default Enter behavior (move to the next row within a selection range)\n        return false;\n      },\n      runOnlyIf: () => {\n        var _this$hot$getSelected, _this$hot$getSelected2;\n        const highlight = (_this$hot$getSelected = this.hot.getSelectedRangeLast()) === null || _this$hot$getSelected === void 0 ? void 0 : _this$hot$getSelected.highlight;\n        return highlight && ((_this$hot$getSelected2 = this.hot.getSelectedRangeLast()) === null || _this$hot$getSelected2 === void 0 ? void 0 : _this$hot$getSelected2.isSingle()) && this.hot.selection.isCellVisible(highlight) && highlight.col === -1 && highlight.row >= 0;\n      },\n      group: SHORTCUTS_GROUP,\n      relativeToGroup: SHORTCUTS_GROUP_EDITOR,\n      position: 'before'\n    });\n  }\n\n  /**\n   * Unregister shortcuts responsible for toggling collapsible columns.\n   *\n   * @private\n   */\n  unregisterShortcuts() {\n    this.hot.getShortcutManager().getContext('grid').removeShortcutsByGroup(SHORTCUTS_GROUP);\n  }\n  /**\n   * Enable the modify hook skipping flag - allows retrieving the data from Handsontable without this plugin's\n   * modifications.\n   *\n   * @private\n   */\n  disableCoreAPIModifiers() {\n    _classPrivateFieldSet(_skipCoreAPIModifiers, this, true);\n  }\n\n  /**\n   * Disable the modify hook skipping flag.\n   *\n   * @private\n   */\n  enableCoreAPIModifiers() {\n    _classPrivateFieldSet(_skipCoreAPIModifiers, this, false);\n  }\n\n  /**\n   * `beforeOnCellMousedown` hook callback.\n   *\n   * @param {MouseEvent} event Mousedown event.\n   * @param {object} coords Cell coords.\n   * @param {HTMLElement} TD Clicked cell.\n   */\n\n  /**\n   * The modifyRowData hook callback.\n   *\n   * @private\n   * @param {number} row Visual row index.\n   * @returns {boolean}\n   */\n  onModifyRowData(row) {\n    if (_classPrivateFieldGet(_skipCoreAPIModifiers, this)) {\n      return;\n    }\n    return this.dataManager.getDataObject(row);\n  }\n\n  /**\n   * Modify the source data length to match the length of the nested structure.\n   *\n   * @private\n   * @returns {number}\n   */\n  onModifySourceLength() {\n    if (_classPrivateFieldGet(_skipCoreAPIModifiers, this)) {\n      return;\n    }\n    return this.dataManager.countAllRows();\n  }\n\n  /**\n   * @private\n   * @param {number} index The index where the data was spliced.\n   * @param {number} amount An amount of items to remove.\n   * @param {object} element An element to add.\n   * @returns {boolean}\n   */\n  onBeforeDataSplice(index, amount, element) {\n    if (_classPrivateFieldGet(_skipCoreAPIModifiers, this) || this.dataManager.isRowHighestLevel(index)) {\n      return true;\n    }\n    this.dataManager.spliceData(index, amount, element);\n    return false;\n  }\n\n  /**\n   * Provide custom source data filtering. It's handled by core method and replaces the native filtering.\n   *\n   * @param {number} index The index where the data filtering starts.\n   * @param {number} amount An amount of rows which filtering applies to.\n   * @param {number} physicalRows Physical row indexes.\n   * @returns {Array}\n   */\n\n  /**\n   * Destroys the plugin instance.\n   */\n  destroy() {\n    super.destroy();\n  }\n}\nfunction _onBeforeRowMove(rows, finalIndex, dropIndex, movePossible) {\n  return this.rowMoveController.onBeforeRowMove(rows, finalIndex, dropIndex, movePossible);\n}\nfunction _onBeforeOnCellMouseDown(event, coords, TD) {\n  this.collapsingUI.toggleState(event, coords, TD);\n}\nfunction _onFilterData(index, amount, physicalRows) {\n  this.collapsingUI.collapsedRowsStash.stash();\n  this.collapsingUI.collapsedRowsStash.trimStash(physicalRows[0], amount);\n  this.collapsingUI.collapsedRowsStash.shiftStash(physicalRows[0], null, -1 * amount);\n  this.dataManager.filterData(index, amount, physicalRows);\n  _classPrivateFieldSet(_skipRender, this, true);\n  return this.dataManager.getData().slice(); // Data contains reference sometimes.\n}\n/**\n * `afterContextMenuDefaultOptions` hook callback.\n *\n * @param {object} defaultOptions The default context menu items order.\n * @returns {boolean}\n */\nfunction _onAfterContextMenuDefaultOptions(defaultOptions) {\n  return this.contextMenuUI.appendOptions(defaultOptions);\n}\n/**\n * `afterGetRowHeader` hook callback.\n *\n * @param {number} row Row index.\n * @param {HTMLElement} TH Row header element.\n */\nfunction _onAfterGetRowHeader(row, TH) {\n  this.headersUI.appendLevelIndicators(row, TH);\n}\n/**\n * `modifyRowHeaderWidth` hook callback.\n *\n * @param {number} rowHeaderWidth The initial row header width(s).\n * @returns {number}\n */\nfunction _onModifyRowHeaderWidth(rowHeaderWidth) {\n  return Math.max(this.headersUI.rowHeaderWidthCache, rowHeaderWidth);\n}\n/**\n * `onAfterRemoveRow` hook callback.\n *\n * @param {number} index Removed row.\n * @param {number} amount Amount of removed rows.\n * @param {Array} logicRows An array of the removed physical rows.\n * @param {string} source Source of action.\n */\nfunction _onAfterRemoveRow(index, amount, logicRows, source) {\n  if (source === this.pluginName) {\n    return;\n  }\n  this.hot._registerTimeout(() => {\n    _classPrivateFieldSet(_skipRender, this, false);\n    this.headersUI.updateRowHeaderWidth();\n    this.collapsingUI.collapsedRowsStash.applyStash();\n  });\n}\n/**\n * Callback for the `beforeRemoveRow` change list of removed physical indexes by reference. Removing parent node\n * has effect in removing children nodes.\n *\n * @param {number} index Visual index of starter row.\n * @param {number} amount Amount of rows to be removed.\n * @param {Array} physicalRows List of physical indexes.\n */\nfunction _onBeforeRemoveRow(index, amount, physicalRows) {\n  const modifiedPhysicalRows = Array.from(physicalRows.reduce((removedRows, physicalIndex) => {\n    if (this.dataManager.isParent(physicalIndex)) {\n      const children = this.dataManager.getDataObject(physicalIndex).__children;\n\n      // Preserve a parent in the list of removed rows.\n      removedRows.add(physicalIndex);\n      if (Array.isArray(children)) {\n        // Add a children to the list of removed rows.\n        children.forEach(child => removedRows.add(this.dataManager.getRowIndex(child)));\n      }\n      return removedRows;\n    }\n\n    // Don't modify list of removed rows when already checked element isn't a parent.\n    return removedRows.add(physicalIndex);\n  }, new Set()));\n\n  // Modifying hook's argument by the reference.\n  physicalRows.length = 0;\n  physicalRows.push(...modifiedPhysicalRows);\n}\n/**\n * `beforeAddChild` hook callback.\n */\nfunction _onBeforeAddChild() {\n  this.collapsingUI.collapsedRowsStash.stash();\n}\n/**\n * `afterAddChild` hook callback.\n *\n * @param {object} parent Parent element.\n * @param {object} element New child element.\n */\nfunction _onAfterAddChild(parent, element) {\n  this.collapsingUI.collapsedRowsStash.shiftStash(this.dataManager.getRowIndex(element));\n  this.collapsingUI.collapsedRowsStash.applyStash();\n  this.headersUI.updateRowHeaderWidth();\n}\n/**\n * `beforeDetachChild` hook callback.\n */\nfunction _onBeforeDetachChild() {\n  this.collapsingUI.collapsedRowsStash.stash();\n}\n/**\n * `afterDetachChild` hook callback.\n *\n * @param {object} parent Parent element.\n * @param {object} element New child element.\n * @param {number} finalElementRowIndex The final row index of the detached element.\n */\nfunction _onAfterDetachChild(parent, element, finalElementRowIndex) {\n  this.collapsingUI.collapsedRowsStash.shiftStash(finalElementRowIndex, null, -1);\n  this.collapsingUI.collapsedRowsStash.applyStash();\n  this.headersUI.updateRowHeaderWidth();\n}\n/**\n * `afterCreateRow` hook callback.\n */\nfunction _onAfterCreateRow() {\n  this.dataManager.rewriteCache();\n}\n/**\n * `afterInit` hook callback.\n */\nfunction _onAfterInit() {\n  this.headersUI.updateRowHeaderWidth();\n}\n/**\n * `beforeViewRender` hook callback.\n *\n * @param {boolean} force Indicates if the render call was triggered by a change of settings or data.\n * @param {object} skipRender An object, holder for skipRender functionality.\n */\nfunction _onBeforeViewRender(force, skipRender) {\n  if (_classPrivateFieldGet(_skipRender, this)) {\n    skipRender.skipRender = true;\n  }\n}\n/**\n * `beforeLoadData` hook callback.\n *\n * @param {Array} data The source data.\n */\nfunction _onBeforeLoadData(data) {\n  if (!isArrayOfObjects(data)) {\n    error(WRONG_DATA_TYPE_ERROR);\n    this.hot.getSettings()[PLUGIN_KEY] = false;\n    this.disablePlugin();\n    return;\n  }\n  this.dataManager.setData(data);\n  this.dataManager.rewriteCache();\n}"],"mappings":"AASA,SAASA,2BAA2BA,CAACC,CAAC,EAAEC,CAAC,EAAE;EAAEC,0BAA0B,CAACF,CAAC,EAAEC,CAAC,CAAC,EAAEA,CAAC,CAACE,GAAG,CAACH,CAAC,CAAC;AAAE;AACzF,SAASI,0BAA0BA,CAACJ,CAAC,EAAEK,CAAC,EAAEJ,CAAC,EAAE;EAAEC,0BAA0B,CAACF,CAAC,EAAEK,CAAC,CAAC,EAAEA,CAAC,CAACC,GAAG,CAACN,CAAC,EAAEC,CAAC,CAAC;AAAE;AAC9F,SAASC,0BAA0BA,CAACF,CAAC,EAAEK,CAAC,EAAE;EAAE,IAAIA,CAAC,CAACE,GAAG,CAACP,CAAC,CAAC,EAAE,MAAM,IAAIQ,SAAS,CAAC,gEAAgE,CAAC;AAAE;AACjJ,SAASC,eAAeA,CAACT,CAAC,EAAEU,CAAC,EAAEL,CAAC,EAAE;EAAE,OAAO,CAACK,CAAC,GAAGC,cAAc,CAACD,CAAC,CAAC,KAAKV,CAAC,GAAGY,MAAM,CAACC,cAAc,CAACb,CAAC,EAAEU,CAAC,EAAE;IAAEI,KAAK,EAAET,CAAC;IAAEU,UAAU,EAAE,CAAC,CAAC;IAAEC,YAAY,EAAE,CAAC,CAAC;IAAEC,QAAQ,EAAE,CAAC;EAAE,CAAC,CAAC,GAAGjB,CAAC,CAACU,CAAC,CAAC,GAAGL,CAAC,EAAEL,CAAC;AAAE;AACnL,SAASW,cAAcA,CAACN,CAAC,EAAE;EAAE,IAAIa,CAAC,GAAGC,YAAY,CAACd,CAAC,EAAE,QAAQ,CAAC;EAAE,OAAO,QAAQ,IAAI,OAAOa,CAAC,GAAGA,CAAC,GAAGA,CAAC,GAAG,EAAE;AAAE;AAC1G,SAASC,YAAYA,CAACd,CAAC,EAAEK,CAAC,EAAE;EAAE,IAAI,QAAQ,IAAI,OAAOL,CAAC,IAAI,CAACA,CAAC,EAAE,OAAOA,CAAC;EAAE,IAAIL,CAAC,GAAGK,CAAC,CAACe,MAAM,CAACC,WAAW,CAAC;EAAE,IAAI,KAAK,CAAC,KAAKrB,CAAC,EAAE;IAAE,IAAIkB,CAAC,GAAGlB,CAAC,CAACsB,IAAI,CAACjB,CAAC,EAAEK,CAAC,IAAI,SAAS,CAAC;IAAE,IAAI,QAAQ,IAAI,OAAOQ,CAAC,EAAE,OAAOA,CAAC;IAAE,MAAM,IAAIV,SAAS,CAAC,8CAA8C,CAAC;EAAE;EAAE,OAAO,CAAC,QAAQ,KAAKE,CAAC,GAAGa,MAAM,GAAGC,MAAM,EAAEnB,CAAC,CAAC;AAAE;AACvT,SAASoB,qBAAqBA,CAACC,CAAC,EAAEzB,CAAC,EAAE;EAAE,OAAOyB,CAAC,CAACC,GAAG,CAACC,iBAAiB,CAACF,CAAC,EAAEzB,CAAC,CAAC,CAAC;AAAE;AAC9E,SAAS4B,qBAAqBA,CAACH,CAAC,EAAEzB,CAAC,EAAES,CAAC,EAAE;EAAE,OAAOgB,CAAC,CAACpB,GAAG,CAACsB,iBAAiB,CAACF,CAAC,EAAEzB,CAAC,CAAC,EAAES,CAAC,CAAC,EAAEA,CAAC;AAAE;AACvF,SAASkB,iBAAiBA,CAAC5B,CAAC,EAAEK,CAAC,EAAEyB,CAAC,EAAE;EAAE,IAAI,UAAU,IAAI,OAAO9B,CAAC,GAAGA,CAAC,KAAKK,CAAC,GAAGL,CAAC,CAACO,GAAG,CAACF,CAAC,CAAC,EAAE,OAAO0B,SAAS,CAACC,MAAM,GAAG,CAAC,GAAG3B,CAAC,GAAGyB,CAAC;EAAE,MAAM,IAAItB,SAAS,CAAC,+CAA+C,CAAC;AAAE;AAClM,SAASyB,UAAU,QAAQ,mBAAmB;AAC9C,OAAOC,WAAW,MAAM,wBAAwB;AAChD,OAAOC,YAAY,MAAM,qBAAqB;AAC9C,OAAOC,SAAS,MAAM,kBAAkB;AACxC,OAAOC,aAAa,MAAM,sBAAsB;AAChD,SAASC,KAAK,QAAQ,2BAA2B;AACjD,SAASC,gBAAgB,QAAQ,wBAAwB;AACzD,SAASC,WAAW,QAAQ,8BAA8B;AAC1D,SAASC,iBAAiB,IAAIC,sBAAsB,QAAQ,kCAAkC;AAC9F,OAAOC,iBAAiB,MAAM,+BAA+B;AAC7D,OAAO,MAAMC,UAAU,GAAG,YAAY;AACtC,OAAO,MAAMC,eAAe,GAAG,GAAG;AAClC,MAAMC,eAAe,GAAGF,UAAU;;AAElC;AACA;AACA;AACA;AACA,MAAMG,qBAAqB,GAAG,wEAAwE,GAAG,0CAA0C;;AAEnJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAIC,WAAW,GAAG,aAAa,IAAIC,OAAO,CAAC,CAAC;AAC5C,IAAIC,qBAAqB,GAAG,aAAa,IAAID,OAAO,CAAC,CAAC;AACtD,IAAIE,iBAAiB,GAAG,aAAa,IAAIC,OAAO,CAAC,CAAC;AAClD,OAAO,MAAMC,UAAU,SAASpB,UAAU,CAAC;EACzCqB,WAAWA,CAAA,EAAG;IACZ,KAAK,CAAC,GAAGvB,SAAS,CAAC;IACnB;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACIhC,2BAA2B,CAAC,IAAI,EAAEoD,iBAAiB,CAAC;IACpD;AACJ;AACA;AACA;AACA;AACA;IACI1C,eAAe,CAAC,IAAI,EAAE,aAAa,EAAE,IAAI,CAAC;IAC1C;AACJ;AACA;AACA;AACA;AACA;IACIA,eAAe,CAAC,IAAI,EAAE,WAAW,EAAE,IAAI,CAAC;IACxC;AACJ;AACA;AACA;AACA;AACA;IACIA,eAAe,CAAC,IAAI,EAAE,kBAAkB,EAAE,IAAI,CAAC;IAC/C;AACJ;AACA;AACA;AACA;IACIL,0BAA0B,CAAC,IAAI,EAAE4C,WAAW,EAAE,KAAK,CAAC;IACpD;AACJ;AACA;AACA;AACA;IACI5C,0BAA0B,CAAC,IAAI,EAAE8C,qBAAqB,EAAE,KAAK,CAAC;EAChE;EACA,WAAWN,UAAUA,CAAA,EAAG;IACtB,OAAOA,UAAU;EACnB;EACA,WAAWC,eAAeA,CAAA,EAAG;IAC3B,OAAOA,eAAe;EACxB;EACA;AACF;AACA;AACA;AACA;AACA;EACEU,SAASA,CAAA,EAAG;IACV,OAAO,CAAC,CAAC,IAAI,CAACC,GAAG,CAACC,WAAW,CAAC,CAAC,CAACb,UAAU,CAAC;EAC7C;;EAEA;AACF;AACA;EACEc,YAAYA,CAAA,EAAG;IACb,IAAIC,KAAK,GAAG,IAAI;IAChB,IAAI,IAAI,CAACC,OAAO,EAAE;MAChB;IACF;IACA,IAAI,CAACC,gBAAgB,GAAG,IAAI,CAACL,GAAG,CAACM,cAAc,CAACC,WAAW,CAAC,YAAY,EAAE,IAAIvB,WAAW,CAAC,CAAC,CAAC;IAC5F,IAAI,CAACwB,WAAW,GAAG,IAAI9B,WAAW,CAAC,IAAI,EAAE,IAAI,CAACsB,GAAG,CAAC;IAClD,IAAI,CAACS,YAAY,GAAG,IAAI9B,YAAY,CAAC,IAAI,EAAE,IAAI,CAACqB,GAAG,CAAC;IACpD,IAAI,CAACU,SAAS,GAAG,IAAI9B,SAAS,CAAC,IAAI,EAAE,IAAI,CAACoB,GAAG,CAAC;IAC9C,IAAI,CAACW,aAAa,GAAG,IAAI9B,aAAa,CAAC,IAAI,EAAE,IAAI,CAACmB,GAAG,CAAC;IACtD,IAAI,CAACY,iBAAiB,GAAG,IAAIzB,iBAAiB,CAAC,IAAI,CAAC;IACpD,IAAI,CAAC0B,OAAO,CAAC,WAAW,EAAE,YAAY;MACpC,KAAK,IAAIC,IAAI,GAAGvC,SAAS,CAACC,MAAM,EAAEuC,IAAI,GAAG,IAAIC,KAAK,CAACF,IAAI,CAAC,EAAEG,IAAI,GAAG,CAAC,EAAEA,IAAI,GAAGH,IAAI,EAAEG,IAAI,EAAE,EAAE;QACvFF,IAAI,CAACE,IAAI,CAAC,GAAG1C,SAAS,CAAC0C,IAAI,CAAC;MAC9B;MACA,OAAO7C,iBAAiB,CAACuB,iBAAiB,EAAEQ,KAAK,EAAEe,YAAY,CAAC,CAACpD,IAAI,CAACqC,KAAK,EAAE,GAAGY,IAAI,CAAC;IACvF,CAAC,CAAC;IACF,IAAI,CAACF,OAAO,CAAC,kBAAkB,EAAE,YAAY;MAC3C,KAAK,IAAIM,KAAK,GAAG5C,SAAS,CAACC,MAAM,EAAEuC,IAAI,GAAG,IAAIC,KAAK,CAACG,KAAK,CAAC,EAAEC,KAAK,GAAG,CAAC,EAAEA,KAAK,GAAGD,KAAK,EAAEC,KAAK,EAAE,EAAE;QAC7FL,IAAI,CAACK,KAAK,CAAC,GAAG7C,SAAS,CAAC6C,KAAK,CAAC;MAChC;MACA,OAAOhD,iBAAiB,CAACuB,iBAAiB,EAAEQ,KAAK,EAAEkB,mBAAmB,CAAC,CAACvD,IAAI,CAACqC,KAAK,EAAE,GAAGY,IAAI,CAAC;IAC9F,CAAC,CAAC;IACF,IAAI,CAACF,OAAO,CAAC,eAAe,EAAE,YAAY;MACxC,OAAOV,KAAK,CAACmB,eAAe,CAAC,GAAG/C,SAAS,CAAC;IAC5C,CAAC,CAAC;IACF,IAAI,CAACsC,OAAO,CAAC,oBAAoB,EAAE,YAAY;MAC7C,OAAOV,KAAK,CAACoB,oBAAoB,CAAC,GAAGhD,SAAS,CAAC;IACjD,CAAC,CAAC;IACF,IAAI,CAACsC,OAAO,CAAC,kBAAkB,EAAE,YAAY;MAC3C,OAAOV,KAAK,CAACqB,kBAAkB,CAAC,GAAGjD,SAAS,CAAC;IAC/C,CAAC,CAAC;IACF,IAAI,CAACsC,OAAO,CAAC,YAAY,EAAE,YAAY;MACrC,KAAK,IAAIY,KAAK,GAAGlD,SAAS,CAACC,MAAM,EAAEuC,IAAI,GAAG,IAAIC,KAAK,CAACS,KAAK,CAAC,EAAEC,KAAK,GAAG,CAAC,EAAEA,KAAK,GAAGD,KAAK,EAAEC,KAAK,EAAE,EAAE;QAC7FX,IAAI,CAACW,KAAK,CAAC,GAAGnD,SAAS,CAACmD,KAAK,CAAC;MAChC;MACA,OAAOtD,iBAAiB,CAACuB,iBAAiB,EAAEQ,KAAK,EAAEwB,aAAa,CAAC,CAAC7D,IAAI,CAACqC,KAAK,EAAE,GAAGY,IAAI,CAAC;IACxF,CAAC,CAAC;IACF,IAAI,CAACF,OAAO,CAAC,gCAAgC,EAAE,YAAY;MACzD,KAAK,IAAIe,KAAK,GAAGrD,SAAS,CAACC,MAAM,EAAEuC,IAAI,GAAG,IAAIC,KAAK,CAACY,KAAK,CAAC,EAAEC,KAAK,GAAG,CAAC,EAAEA,KAAK,GAAGD,KAAK,EAAEC,KAAK,EAAE,EAAE;QAC7Fd,IAAI,CAACc,KAAK,CAAC,GAAGtD,SAAS,CAACsD,KAAK,CAAC;MAChC;MACA,OAAOzD,iBAAiB,CAACuB,iBAAiB,EAAEQ,KAAK,EAAE2B,iCAAiC,CAAC,CAAChE,IAAI,CAACqC,KAAK,EAAE,GAAGY,IAAI,CAAC;IAC5G,CAAC,CAAC;IACF,IAAI,CAACF,OAAO,CAAC,mBAAmB,EAAE,YAAY;MAC5C,KAAK,IAAIkB,KAAK,GAAGxD,SAAS,CAACC,MAAM,EAAEuC,IAAI,GAAG,IAAIC,KAAK,CAACe,KAAK,CAAC,EAAEC,KAAK,GAAG,CAAC,EAAEA,KAAK,GAAGD,KAAK,EAAEC,KAAK,EAAE,EAAE;QAC7FjB,IAAI,CAACiB,KAAK,CAAC,GAAGzD,SAAS,CAACyD,KAAK,CAAC;MAChC;MACA,OAAO5D,iBAAiB,CAACuB,iBAAiB,EAAEQ,KAAK,EAAE8B,oBAAoB,CAAC,CAACnE,IAAI,CAACqC,KAAK,EAAE,GAAGY,IAAI,CAAC;IAC/F,CAAC,CAAC;IACF,IAAI,CAACF,OAAO,CAAC,uBAAuB,EAAE,YAAY;MAChD,KAAK,IAAIqB,KAAK,GAAG3D,SAAS,CAACC,MAAM,EAAEuC,IAAI,GAAG,IAAIC,KAAK,CAACkB,KAAK,CAAC,EAAEC,KAAK,GAAG,CAAC,EAAEA,KAAK,GAAGD,KAAK,EAAEC,KAAK,EAAE,EAAE;QAC7FpB,IAAI,CAACoB,KAAK,CAAC,GAAG5D,SAAS,CAAC4D,KAAK,CAAC;MAChC;MACA,OAAO/D,iBAAiB,CAACuB,iBAAiB,EAAEQ,KAAK,EAAEiC,wBAAwB,CAAC,CAACtE,IAAI,CAACqC,KAAK,EAAE,GAAGY,IAAI,CAAC;IACnG,CAAC,CAAC;IACF,IAAI,CAACF,OAAO,CAAC,iBAAiB,EAAE,YAAY;MAC1C,KAAK,IAAIwB,KAAK,GAAG9D,SAAS,CAACC,MAAM,EAAEuC,IAAI,GAAG,IAAIC,KAAK,CAACqB,KAAK,CAAC,EAAEC,KAAK,GAAG,CAAC,EAAEA,KAAK,GAAGD,KAAK,EAAEC,KAAK,EAAE,EAAE;QAC7FvB,IAAI,CAACuB,KAAK,CAAC,GAAG/D,SAAS,CAAC+D,KAAK,CAAC;MAChC;MACA,OAAOlE,iBAAiB,CAACuB,iBAAiB,EAAEQ,KAAK,EAAEoC,kBAAkB,CAAC,CAACzE,IAAI,CAACqC,KAAK,EAAE,GAAGY,IAAI,CAAC;IAC7F,CAAC,CAAC;IACF,IAAI,CAACF,OAAO,CAAC,gBAAgB,EAAE,YAAY;MACzC,KAAK,IAAI2B,KAAK,GAAGjE,SAAS,CAACC,MAAM,EAAEuC,IAAI,GAAG,IAAIC,KAAK,CAACwB,KAAK,CAAC,EAAEC,KAAK,GAAG,CAAC,EAAEA,KAAK,GAAGD,KAAK,EAAEC,KAAK,EAAE,EAAE;QAC7F1B,IAAI,CAAC0B,KAAK,CAAC,GAAGlE,SAAS,CAACkE,KAAK,CAAC;MAChC;MACA,OAAOrE,iBAAiB,CAACuB,iBAAiB,EAAEQ,KAAK,EAAEuC,iBAAiB,CAAC,CAAC5E,IAAI,CAACqC,KAAK,EAAE,GAAGY,IAAI,CAAC;IAC5F,CAAC,CAAC;IACF,IAAI,CAACF,OAAO,CAAC,gBAAgB,EAAE,YAAY;MACzC,KAAK,IAAI8B,KAAK,GAAGpE,SAAS,CAACC,MAAM,EAAEuC,IAAI,GAAG,IAAIC,KAAK,CAAC2B,KAAK,CAAC,EAAEC,KAAK,GAAG,CAAC,EAAEA,KAAK,GAAGD,KAAK,EAAEC,KAAK,EAAE,EAAE;QAC7F7B,IAAI,CAAC6B,KAAK,CAAC,GAAGrE,SAAS,CAACqE,KAAK,CAAC;MAChC;MACA,OAAOxE,iBAAiB,CAACuB,iBAAiB,EAAEQ,KAAK,EAAE0C,iBAAiB,CAAC,CAAC/E,IAAI,CAACqC,KAAK,EAAE,GAAGY,IAAI,CAAC;IAC5F,CAAC,CAAC;IACF,IAAI,CAACF,OAAO,CAAC,eAAe,EAAE,YAAY;MACxC,KAAK,IAAIiC,MAAM,GAAGvE,SAAS,CAACC,MAAM,EAAEuC,IAAI,GAAG,IAAIC,KAAK,CAAC8B,MAAM,CAAC,EAAEC,MAAM,GAAG,CAAC,EAAEA,MAAM,GAAGD,MAAM,EAAEC,MAAM,EAAE,EAAE;QACnGhC,IAAI,CAACgC,MAAM,CAAC,GAAGxE,SAAS,CAACwE,MAAM,CAAC;MAClC;MACA,OAAO3E,iBAAiB,CAACuB,iBAAiB,EAAEQ,KAAK,EAAE6C,gBAAgB,CAAC,CAAClF,IAAI,CAACqC,KAAK,EAAE,GAAGY,IAAI,CAAC;IAC3F,CAAC,CAAC;IACF,IAAI,CAACF,OAAO,CAAC,mBAAmB,EAAE,YAAY;MAC5C,KAAK,IAAIoC,MAAM,GAAG1E,SAAS,CAACC,MAAM,EAAEuC,IAAI,GAAG,IAAIC,KAAK,CAACiC,MAAM,CAAC,EAAEC,MAAM,GAAG,CAAC,EAAEA,MAAM,GAAGD,MAAM,EAAEC,MAAM,EAAE,EAAE;QACnGnC,IAAI,CAACmC,MAAM,CAAC,GAAG3E,SAAS,CAAC2E,MAAM,CAAC;MAClC;MACA,OAAO9E,iBAAiB,CAACuB,iBAAiB,EAAEQ,KAAK,EAAEgD,oBAAoB,CAAC,CAACrF,IAAI,CAACqC,KAAK,EAAE,GAAGY,IAAI,CAAC;IAC/F,CAAC,CAAC;IACF,IAAI,CAACF,OAAO,CAAC,kBAAkB,EAAE,YAAY;MAC3C,KAAK,IAAIuC,MAAM,GAAG7E,SAAS,CAACC,MAAM,EAAEuC,IAAI,GAAG,IAAIC,KAAK,CAACoC,MAAM,CAAC,EAAEC,MAAM,GAAG,CAAC,EAAEA,MAAM,GAAGD,MAAM,EAAEC,MAAM,EAAE,EAAE;QACnGtC,IAAI,CAACsC,MAAM,CAAC,GAAG9E,SAAS,CAAC8E,MAAM,CAAC;MAClC;MACA,OAAOjF,iBAAiB,CAACuB,iBAAiB,EAAEQ,KAAK,EAAEmD,mBAAmB,CAAC,CAACxF,IAAI,CAACqC,KAAK,EAAE,GAAGY,IAAI,CAAC;IAC9F,CAAC,CAAC;IACF,IAAI,CAACF,OAAO,CAAC,sBAAsB,EAAE,YAAY;MAC/C,KAAK,IAAI0C,MAAM,GAAGhF,SAAS,CAACC,MAAM,EAAEuC,IAAI,GAAG,IAAIC,KAAK,CAACuC,MAAM,CAAC,EAAEC,MAAM,GAAG,CAAC,EAAEA,MAAM,GAAGD,MAAM,EAAEC,MAAM,EAAE,EAAE;QACnGzC,IAAI,CAACyC,MAAM,CAAC,GAAGjF,SAAS,CAACiF,MAAM,CAAC;MAClC;MACA,OAAOpF,iBAAiB,CAACuB,iBAAiB,EAAEQ,KAAK,EAAEsD,uBAAuB,CAAC,CAAC3F,IAAI,CAACqC,KAAK,EAAE,GAAGY,IAAI,CAAC;IAClG,CAAC,CAAC;IACF,IAAI,CAACF,OAAO,CAAC,gBAAgB,EAAE,YAAY;MACzC,KAAK,IAAI6C,MAAM,GAAGnF,SAAS,CAACC,MAAM,EAAEuC,IAAI,GAAG,IAAIC,KAAK,CAAC0C,MAAM,CAAC,EAAEC,MAAM,GAAG,CAAC,EAAEA,MAAM,GAAGD,MAAM,EAAEC,MAAM,EAAE,EAAE;QACnG5C,IAAI,CAAC4C,MAAM,CAAC,GAAGpF,SAAS,CAACoF,MAAM,CAAC;MAClC;MACA,OAAOvF,iBAAiB,CAACuB,iBAAiB,EAAEQ,KAAK,EAAEyD,iBAAiB,CAAC,CAAC9F,IAAI,CAACqC,KAAK,EAAE,GAAGY,IAAI,CAAC;IAC5F,CAAC,CAAC;IACF,IAAI,CAACF,OAAO,CAAC,eAAe,EAAE,YAAY;MACxC,KAAK,IAAIgD,MAAM,GAAGtF,SAAS,CAACC,MAAM,EAAEuC,IAAI,GAAG,IAAIC,KAAK,CAAC6C,MAAM,CAAC,EAAEC,MAAM,GAAG,CAAC,EAAEA,MAAM,GAAGD,MAAM,EAAEC,MAAM,EAAE,EAAE;QACnG/C,IAAI,CAAC+C,MAAM,CAAC,GAAGvF,SAAS,CAACuF,MAAM,CAAC;MAClC;MACA,OAAO1F,iBAAiB,CAACuB,iBAAiB,EAAEQ,KAAK,EAAE4D,gBAAgB,CAAC,CAACjG,IAAI,CAACqC,KAAK,EAAE,GAAGY,IAAI,CAAC;IAC3F,CAAC,CAAC;IACF,IAAI,CAACF,OAAO,CAAC,gBAAgB,EAAEmD,IAAI,IAAI5F,iBAAiB,CAACuB,iBAAiB,EAAE,IAAI,EAAEsE,iBAAiB,CAAC,CAACnG,IAAI,CAAC,IAAI,EAAEkG,IAAI,CAAC,CAAC;IACtH,IAAI,CAACnD,OAAO,CAAC,kBAAkB,EAAEmD,IAAI,IAAI5F,iBAAiB,CAACuB,iBAAiB,EAAE,IAAI,EAAEsE,iBAAiB,CAAC,CAACnG,IAAI,CAAC,IAAI,EAAEkG,IAAI,CAAC,CAAC;IACxH,IAAI,CAACE,iBAAiB,CAAC,CAAC;IACxB,KAAK,CAAChE,YAAY,CAAC,CAAC;EACtB;;EAEA;AACF;AACA;EACEiE,aAAaA,CAAA,EAAG;IACd,IAAI,CAACnE,GAAG,CAACM,cAAc,CAAC8D,aAAa,CAAC,YAAY,CAAC;IACnD,IAAI,CAACC,mBAAmB,CAAC,CAAC;IAC1B,KAAK,CAACF,aAAa,CAAC,CAAC;EACvB;;EAEA;AACF;AACA;AACA;AACA;AACA;EACEG,YAAYA,CAAA,EAAG;IACb,IAAI,CAACH,aAAa,CAAC,CAAC;;IAEpB;IACA,MAAMI,iBAAiB,GAAG,IAAI,CAAC/D,WAAW,CAACgE,OAAO,CAAC,CAAC;IACpD,IAAI,CAACtE,YAAY,CAAC,CAAC;;IAEnB;IACA,IAAI,CAACM,WAAW,CAACiE,cAAc,CAACF,iBAAiB,CAAC;IAClD,KAAK,CAACD,YAAY,CAAC,CAAC;EACtB;;EAEA;AACF;AACA;AACA;AACA;EACEJ,iBAAiBA,CAAA,EAAG;IAClB,IAAI,CAAClE,GAAG,CAAC0E,kBAAkB,CAAC,CAAC,CAACC,UAAU,CAAC,MAAM,CAAC,CAACC,WAAW,CAAC;MAC3DC,IAAI,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC;MACjBC,QAAQ,EAAEA,CAAA,KAAM;QACd,MAAM;UACJC;QACF,CAAC,GAAG,IAAI,CAAC/E,GAAG,CAACgF,oBAAoB,CAAC,CAAC;QACnC,MAAMC,GAAG,GAAG,IAAI,CAACxE,YAAY,CAACyE,mBAAmB,CAACH,SAAS,CAACE,GAAG,CAAC;QAChE,IAAI,IAAI,CAACxE,YAAY,CAAC0E,oBAAoB,CAACF,GAAG,CAAC,EAAE;UAC/C,IAAI,CAACxE,YAAY,CAAC2E,cAAc,CAACH,GAAG,CAAC;QACvC,CAAC,MAAM;UACL,IAAI,CAACxE,YAAY,CAAC4E,gBAAgB,CAACJ,GAAG,CAAC;QACzC;;QAEA;QACA,OAAO,KAAK;MACd,CAAC;MACDK,SAAS,EAAEA,CAAA,KAAM;QACf,IAAIC,qBAAqB,EAAEC,sBAAsB;QACjD,MAAMT,SAAS,GAAG,CAACQ,qBAAqB,GAAG,IAAI,CAACvF,GAAG,CAACgF,oBAAoB,CAAC,CAAC,MAAM,IAAI,IAAIO,qBAAqB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,qBAAqB,CAACR,SAAS;QACnK,OAAOA,SAAS,KAAK,CAACS,sBAAsB,GAAG,IAAI,CAACxF,GAAG,CAACgF,oBAAoB,CAAC,CAAC,MAAM,IAAI,IAAIQ,sBAAsB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,sBAAsB,CAACC,QAAQ,CAAC,CAAC,CAAC,IAAI,IAAI,CAACzF,GAAG,CAAC0F,SAAS,CAACC,aAAa,CAACZ,SAAS,CAAC,IAAIA,SAAS,CAACa,GAAG,KAAK,CAAC,CAAC,IAAIb,SAAS,CAACE,GAAG,IAAI,CAAC;MAC1Q,CAAC;MACDY,KAAK,EAAEvG,eAAe;MACtBwG,eAAe,EAAE5G,sBAAsB;MACvC6G,QAAQ,EAAE;IACZ,CAAC,CAAC;EACJ;;EAEA;AACF;AACA;AACA;AACA;EACE1B,mBAAmBA,CAAA,EAAG;IACpB,IAAI,CAACrE,GAAG,CAAC0E,kBAAkB,CAAC,CAAC,CAACC,UAAU,CAAC,MAAM,CAAC,CAACqB,sBAAsB,CAAC1G,eAAe,CAAC;EAC1F;EACA;AACF;AACA;AACA;AACA;AACA;EACE2G,uBAAuBA,CAAA,EAAG;IACxB5H,qBAAqB,CAACqB,qBAAqB,EAAE,IAAI,EAAE,IAAI,CAAC;EAC1D;;EAEA;AACF;AACA;AACA;AACA;EACEwG,sBAAsBA,CAAA,EAAG;IACvB7H,qBAAqB,CAACqB,qBAAqB,EAAE,IAAI,EAAE,KAAK,CAAC;EAC3D;;EAEA;AACF;AACA;AACA;AACA;AACA;AACA;;EAEE;AACF;AACA;AACA;AACA;AACA;AACA;EACE4B,eAAeA,CAAC2D,GAAG,EAAE;IACnB,IAAIhH,qBAAqB,CAACyB,qBAAqB,EAAE,IAAI,CAAC,EAAE;MACtD;IACF;IACA,OAAO,IAAI,CAACc,WAAW,CAAC2F,aAAa,CAAClB,GAAG,CAAC;EAC5C;;EAEA;AACF;AACA;AACA;AACA;AACA;EACE1D,oBAAoBA,CAAA,EAAG;IACrB,IAAItD,qBAAqB,CAACyB,qBAAqB,EAAE,IAAI,CAAC,EAAE;MACtD;IACF;IACA,OAAO,IAAI,CAACc,WAAW,CAAC4F,YAAY,CAAC,CAAC;EACxC;;EAEA;AACF;AACA;AACA;AACA;AACA;AACA;EACE5E,kBAAkBA,CAAC6E,KAAK,EAAEC,MAAM,EAAEC,OAAO,EAAE;IACzC,IAAItI,qBAAqB,CAACyB,qBAAqB,EAAE,IAAI,CAAC,IAAI,IAAI,CAACc,WAAW,CAACgG,iBAAiB,CAACH,KAAK,CAAC,EAAE;MACnG,OAAO,IAAI;IACb;IACA,IAAI,CAAC7F,WAAW,CAACiG,UAAU,CAACJ,KAAK,EAAEC,MAAM,EAAEC,OAAO,CAAC;IACnD,OAAO,KAAK;EACd;;EAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;;EAEE;AACF;AACA;EACEG,OAAOA,CAAA,EAAG;IACR,KAAK,CAACA,OAAO,CAAC,CAAC;EACjB;AACF;AACA,SAAS3C,gBAAgBA,CAAC4C,IAAI,EAAEC,UAAU,EAAEC,SAAS,EAAEC,YAAY,EAAE;EACnE,OAAO,IAAI,CAAClG,iBAAiB,CAACmG,eAAe,CAACJ,IAAI,EAAEC,UAAU,EAAEC,SAAS,EAAEC,YAAY,CAAC;AAC1F;AACA,SAAS1E,wBAAwBA,CAAC4E,KAAK,EAAEC,MAAM,EAAEC,EAAE,EAAE;EACnD,IAAI,CAACzG,YAAY,CAAC0G,WAAW,CAACH,KAAK,EAAEC,MAAM,EAAEC,EAAE,CAAC;AAClD;AACA,SAASvF,aAAaA,CAAC0E,KAAK,EAAEC,MAAM,EAAEc,YAAY,EAAE;EAClD,IAAI,CAAC3G,YAAY,CAAC4G,kBAAkB,CAACC,KAAK,CAAC,CAAC;EAC5C,IAAI,CAAC7G,YAAY,CAAC4G,kBAAkB,CAACE,SAAS,CAACH,YAAY,CAAC,CAAC,CAAC,EAAEd,MAAM,CAAC;EACvE,IAAI,CAAC7F,YAAY,CAAC4G,kBAAkB,CAACG,UAAU,CAACJ,YAAY,CAAC,CAAC,CAAC,EAAE,IAAI,EAAE,CAAC,CAAC,GAAGd,MAAM,CAAC;EACnF,IAAI,CAAC9F,WAAW,CAACiH,UAAU,CAACpB,KAAK,EAAEC,MAAM,EAAEc,YAAY,CAAC;EACxD/I,qBAAqB,CAACmB,WAAW,EAAE,IAAI,EAAE,IAAI,CAAC;EAC9C,OAAO,IAAI,CAACgB,WAAW,CAACgE,OAAO,CAAC,CAAC,CAACkD,KAAK,CAAC,CAAC,CAAC,CAAC;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS5F,iCAAiCA,CAAC6F,cAAc,EAAE;EACzD,OAAO,IAAI,CAAChH,aAAa,CAACiH,aAAa,CAACD,cAAc,CAAC;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS1F,oBAAoBA,CAACgD,GAAG,EAAE4C,EAAE,EAAE;EACrC,IAAI,CAACnH,SAAS,CAACoH,qBAAqB,CAAC7C,GAAG,EAAE4C,EAAE,CAAC;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASpE,uBAAuBA,CAACsE,cAAc,EAAE;EAC/C,OAAOC,IAAI,CAACC,GAAG,CAAC,IAAI,CAACvH,SAAS,CAACwH,mBAAmB,EAAEH,cAAc,CAAC;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASrF,iBAAiBA,CAAC2D,KAAK,EAAEC,MAAM,EAAE6B,SAAS,EAAEC,MAAM,EAAE;EAC3D,IAAIA,MAAM,KAAK,IAAI,CAACC,UAAU,EAAE;IAC9B;EACF;EACA,IAAI,CAACrI,GAAG,CAACsI,gBAAgB,CAAC,MAAM;IAC9BjK,qBAAqB,CAACmB,WAAW,EAAE,IAAI,EAAE,KAAK,CAAC;IAC/C,IAAI,CAACkB,SAAS,CAAC6H,oBAAoB,CAAC,CAAC;IACrC,IAAI,CAAC9H,YAAY,CAAC4G,kBAAkB,CAACmB,UAAU,CAAC,CAAC;EACnD,CAAC,CAAC;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASjG,kBAAkBA,CAAC8D,KAAK,EAAEC,MAAM,EAAEc,YAAY,EAAE;EACvD,MAAMqB,oBAAoB,GAAGzH,KAAK,CAAC0H,IAAI,CAACtB,YAAY,CAACuB,MAAM,CAAC,CAACC,WAAW,EAAEC,aAAa,KAAK;IAC1F,IAAI,IAAI,CAACrI,WAAW,CAACsI,QAAQ,CAACD,aAAa,CAAC,EAAE;MAC5C,MAAME,QAAQ,GAAG,IAAI,CAACvI,WAAW,CAAC2F,aAAa,CAAC0C,aAAa,CAAC,CAACG,UAAU;;MAEzE;MACAJ,WAAW,CAACjM,GAAG,CAACkM,aAAa,CAAC;MAC9B,IAAI7H,KAAK,CAACiI,OAAO,CAACF,QAAQ,CAAC,EAAE;QAC3B;QACAA,QAAQ,CAACG,OAAO,CAACC,KAAK,IAAIP,WAAW,CAACjM,GAAG,CAAC,IAAI,CAAC6D,WAAW,CAAC4I,WAAW,CAACD,KAAK,CAAC,CAAC,CAAC;MACjF;MACA,OAAOP,WAAW;IACpB;;IAEA;IACA,OAAOA,WAAW,CAACjM,GAAG,CAACkM,aAAa,CAAC;EACvC,CAAC,EAAE,IAAIQ,GAAG,CAAC,CAAC,CAAC,CAAC;;EAEd;EACAjC,YAAY,CAAC5I,MAAM,GAAG,CAAC;EACvB4I,YAAY,CAACkC,IAAI,CAAC,GAAGb,oBAAoB,CAAC;AAC5C;AACA;AACA;AACA;AACA,SAAS5F,iBAAiBA,CAAA,EAAG;EAC3B,IAAI,CAACpC,YAAY,CAAC4G,kBAAkB,CAACC,KAAK,CAAC,CAAC;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAStE,gBAAgBA,CAACuG,MAAM,EAAEhD,OAAO,EAAE;EACzC,IAAI,CAAC9F,YAAY,CAAC4G,kBAAkB,CAACG,UAAU,CAAC,IAAI,CAAChH,WAAW,CAAC4I,WAAW,CAAC7C,OAAO,CAAC,CAAC;EACtF,IAAI,CAAC9F,YAAY,CAAC4G,kBAAkB,CAACmB,UAAU,CAAC,CAAC;EACjD,IAAI,CAAC9H,SAAS,CAAC6H,oBAAoB,CAAC,CAAC;AACvC;AACA;AACA;AACA;AACA,SAASpF,oBAAoBA,CAAA,EAAG;EAC9B,IAAI,CAAC1C,YAAY,CAAC4G,kBAAkB,CAACC,KAAK,CAAC,CAAC;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAShE,mBAAmBA,CAACiG,MAAM,EAAEhD,OAAO,EAAEiD,oBAAoB,EAAE;EAClE,IAAI,CAAC/I,YAAY,CAAC4G,kBAAkB,CAACG,UAAU,CAACgC,oBAAoB,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;EAC/E,IAAI,CAAC/I,YAAY,CAAC4G,kBAAkB,CAACmB,UAAU,CAAC,CAAC;EACjD,IAAI,CAAC9H,SAAS,CAAC6H,oBAAoB,CAAC,CAAC;AACvC;AACA;AACA;AACA;AACA,SAAS3E,iBAAiBA,CAAA,EAAG;EAC3B,IAAI,CAACpD,WAAW,CAACiJ,YAAY,CAAC,CAAC;AACjC;AACA;AACA;AACA;AACA,SAASvI,YAAYA,CAAA,EAAG;EACtB,IAAI,CAACR,SAAS,CAAC6H,oBAAoB,CAAC,CAAC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASlH,mBAAmBA,CAACqI,KAAK,EAAEC,UAAU,EAAE;EAC9C,IAAI1L,qBAAqB,CAACuB,WAAW,EAAE,IAAI,CAAC,EAAE;IAC5CmK,UAAU,CAACA,UAAU,GAAG,IAAI;EAC9B;AACF;AACA;AACA;AACA;AACA;AACA;AACA,SAAS1F,iBAAiBA,CAACD,IAAI,EAAE;EAC/B,IAAI,CAACjF,gBAAgB,CAACiF,IAAI,CAAC,EAAE;IAC3BlF,KAAK,CAACS,qBAAqB,CAAC;IAC5B,IAAI,CAACS,GAAG,CAACC,WAAW,CAAC,CAAC,CAACb,UAAU,CAAC,GAAG,KAAK;IAC1C,IAAI,CAAC+E,aAAa,CAAC,CAAC;IACpB;EACF;EACA,IAAI,CAAC3D,WAAW,CAACoJ,OAAO,CAAC5F,IAAI,CAAC;EAC9B,IAAI,CAACxD,WAAW,CAACiJ,YAAY,CAAC,CAAC;AACjC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}